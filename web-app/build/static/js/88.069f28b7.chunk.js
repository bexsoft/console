(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[88],{649:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var s=n(6797),o=n.n(s),i=n(3097),a=n.n(i),r=n(6483),l=n(4710);const c=new class{invoke(e,t,n,s){let i=t;"/"===i[0]&&(i=i.slice(1));let a=o()(e,i);if(s)for(let o in s)a.set(o,s[o]);return a.send(n).then((e=>e.body)).catch((e=>401===e.status&&localStorage.getItem("userLoggedIn")&&!i.includes("api/v1/login")?("/"!==window.location.pathname&&localStorage.setItem("redirect-path",window.location.pathname),(0,r.q7)(),void(window.location.href="".concat(l.p,"login"))):this.onError(e)))}onError(e){if(e.status){const t=a()(e.response,"body.message","Error ".concat(e.status.toString()));let n=a()(e.response,"body.detailedMessage","");t===n&&(n="");const s={errorMessage:t.charAt(0).toUpperCase()+t.slice(1),detailedError:n.charAt(0).toUpperCase()+n.slice(1),statusCode:e.status};return Promise.reject(s)}(0,r.q7)(),window.location.href="".concat(l.p,"login")}}},6483:(e,t,n)=>{"use strict";n.d(t,{K7:()=>u,Tw:()=>j,eQ:()=>m,nO:()=>l,oK:()=>x,q7:()=>h,qO:()=>c,qf:()=>p});var s=n(9816),o=n(3097),i=n.n(o);const a=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],r=["Ki","Mi","Gi","Ti","Pi","Ei"],l=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=parseInt(e,10)||0;return c(n,t)},c=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=0;for(;e>=1024&&++n;)e/=1024;const s=["B",...r];return e.toFixed(1)+" "+(t?s[n]:a[n])},d=e=>{document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;"},h=()=>{s.Ay.removeItem("token"),s.Ay.removeItem("auth-state"),d("token"),d("idp-refresh-token")},u=e=>{const t=Math.floor(e/86400),n=Math.floor(e%86400/3600),s=Math.floor(e%3600/60),o=e%60,i=[];return t>0&&i.push("".concat(t," day").concat(1!==t?"s":"")),n>0&&i.push("".concat(n," hour").concat(1!==n?"s":"")),s>0&&i.push("".concat(s," minute").concat(1!==s?"s":"")),o>0&&i.push("".concat(o," second").concat(1!==o?"s":"")),i.join(" and ")},m=function(e){switch(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"s"){case"ns":e=Math.floor(1e-9*e);break;case"ms":e=Math.floor(.001*e)}const t=Math.floor(e/86400);e-=3600*t*24;const n=Math.floor(e/3600);e-=3600*n;const s=Math.floor(e/60);if(e-=60*s,t>365){const e=t/365;return"".concat(e," year").concat(1===Math.floor(e)?"":"s")}if(t>30){const e=Math.floor(t/30),n=t-30*e;return"".concat(e," month").concat(1===Math.floor(e)?"":"s"," ").concat(n>0?"".concat(n," day").concat(n>1?"s":""):"")}if(t>=7&&t<=30){const e=Math.floor(t/7);return"".concat(Math.floor(e)," week").concat(1===e?"":"s")}return t>=1&&t<=6?"".concat(t," day").concat(t>1?"s":""):"".concat(n>=1?"".concat(n," hour").concat(n>1?"s":""):""," ").concat(s>=1&&0===n?"".concat(s," minute").concat(s>1?"s":""):""," ").concat(e>=1&&0===s&&0===n?"".concat(e," second").concat(e>1?"s":""):"")},x=()=>{const e=i()(window.navigator,"platform","undefined");return e||"undefined"},p=e=>e.split("\u202e").join("<\ufffd202e>"),j=e=>{try{return decodeURIComponent(e)}catch(t){return e}}},3263:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Be});var s=n(5043),o=n(2166),i=n(3216),a=n(6629),r=n(3635),l=n(9161),c=n(6035),d=n(9379),h=n(3097),u=n.n(h),m=n(4986),x=n(3518),p=n(8789),j=n(28),g=n(6483),b=n(1476),f=n.n(b),v=n(4574),S=n(5475),_=n(7938),w=n(579);const y=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n){return(0,w.jsx)(s.Suspense,{fallback:t,children:(0,w.jsx)(e,(0,d.A)({},n))})}};var O=n(4159);const C=e=>(e.match(/\.([^.]*?)(?=\?|#|$)/)||[])[1],T=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const s=Object.keys(e).reduce(((n,s)=>(C(s)&&s.includes(t)&&(n[s]=e[s]),n)),{});return Object.keys(s).filter((e=>{const o=s[e].some((e=>n.find((t=>{let n=!1;if(-1!==t.indexOf("*")){const s=t.substring(0,t.length-1);n=e.includes(s)}return n||e===t})))),i=e.substring(0,e.indexOf("/*."))==="arn:aws:s3:::".concat(t);return o&&(i&&"arn:aws:s3:::*"!==e)}))},E=y(s.lazy((()=>n.e(774).then(n.bind(n,7774))))),A=v.Ay.div((()=>({display:"flex","& .additionalOptions":{paddingRight:"10px",display:"flex",alignItems:"center",["@media (max-width: ".concat(m.nmC.lg,"px)")]:{display:"none"}},"& .slashSpacingStyle":{margin:"0 5px"}}))),I=e=>{let{bucketName:t,internalPaths:n,hidePathButton:a,additionalOptions:d}=e;const h=(0,r.j)(),u=(0,i.Zp)(),x=(0,o.d4)((e=>e.objectBrowser.rewind.rewindEnabled)),p=(0,o.d4)((e=>e.objectBrowser.versionsMode)),j=(0,o.d4)((e=>e.objectBrowser.versionedFile)),b=(0,o.d4)((e=>e.system.anonymousMode)),[v,y]=(0,s.useState)(!1),[C,I]=(0,s.useState)(!1),k=[l.OV.S3_PUT_OBJECT,l.OV.S3_PUT_ACTIONS],N=(0,o.d4)((e=>e.console.session&&e.console.session.permissions||{}));let B=n;""!==n&&(B="/".concat(n));const F=B.split("/").filter((e=>""!==e)),V=F.length-1,D=t+B||t,L=T(N,D,k);(0,s.useEffect)((()=>{I(!1),Object.keys(N).forEach((e=>{e.includes(D)&&e.includes("/*")&&I(!0)}))}),[D,n,N]);const P=(0,_._)([D,...L],k)||b||C;let R=F.map(((e,n)=>{const o="".concat(F.slice(0,n+1).join("/"),"/"),i="/browser/".concat(encodeURIComponent(t),"/").concat(o?"".concat(encodeURIComponent(o)):"");return n===V&&e===j?null:(0,w.jsxs)(s.Fragment,{children:[(0,w.jsx)("span",{className:"slashSpacingStyle",children:"/"}),n===V?(0,w.jsx)("span",{style:{cursor:"default",whiteSpace:"pre"},children:(0,g.Tw)(e)}):(0,w.jsx)(S.N_,{style:{whiteSpace:"pre"},to:i,onClick:()=>{h((0,c.cQ)({status:!1,objectName:""}))},children:(0,g.Tw)(e)})]},"breadcrumbs-".concat(n.toString()))})),z=[];p&&(z=[(0,w.jsx)(s.Fragment,{children:(0,w.jsxs)("span",{children:[(0,w.jsx)("span",{className:"slashSpacingStyle",children:"/"}),j," - Versions"]})},"breadcrumbs-versionedItem")]);const U=[(0,w.jsx)(s.Fragment,{children:(0,w.jsx)(S.N_,{to:"/browser/".concat(t),onClick:()=>{h((0,c.cQ)({status:!1,objectName:""}))},children:t})},"breadcrumbs-root-path"),...R,...z];return(0,w.jsxs)(s.Fragment,{children:[(0,w.jsxs)(A,{children:[v&&(0,w.jsx)(E,{modalOpen:v,bucketName:t,folderName:n,onClose:()=>{y(!1)},limitedSubPath:C&&!((0,_._)([D,...L],k)||b)}),(0,w.jsx)(m.BIu,{sx:{whiteSpace:"pre"},goBackFunction:()=>{if(p)h((0,c.cQ)({status:!1,objectName:""}));else{if(0===F.length)return;const e=F.slice(0,-1);u("/browser/".concat(t).concat(e.length>0?"/".concat(encodeURIComponent("".concat(e.join("/"),"/"))):""))}},additionalOptions:(0,w.jsxs)(s.Fragment,{children:[(0,w.jsx)(f(),{text:"".concat(t,"/").concat(F.join("/")),children:(0,w.jsx)(m.$nd,{id:"copy-path",icon:(0,w.jsx)(m.TdU,{style:{width:"12px",height:"12px",fill:"#969FA8",marginTop:-1}}),variant:"regular",onClick:()=>{h((0,O.Hk)("Path copied to clipboard"))},style:{width:"28px",height:"28px",color:"#969FA8",border:"#969FA8 1px solid",marginRight:5}})}),(0,w.jsx)(m.azJ,{className:"additionalOptions",children:d})]}),children:U}),!a&&(0,w.jsx)(m.m_M,{tooltip:P?"Choose or create a new path":(0,l.vj)([l.OV.S3_PUT_OBJECT,l.OV.S3_PUT_ACTIONS],"create a new path"),children:(0,w.jsx)(m.$nd,{id:"new-path",onClick:()=>{y(!0)},disabled:!b&&(x||!P),icon:(0,w.jsx)(m.pj3,{style:{fill:"#969FA8"}}),style:{whiteSpace:"nowrap"},variant:"regular",label:"Create new path"})})]}),(0,w.jsx)(m.azJ,{sx:{display:"none",marginTop:15,marginBottom:5,justifyContent:"flex-start","& > div":{fontSize:12,fontWeight:"normal",flexDirection:"row",flexWrap:"nowrap"},["@media (max-width: ".concat(m.nmC.lg,"px)")]:{display:"flex"}},children:d})]})};var k=n(3445);const N=e=>"Enabled"===e||"Suspended"===e;var B=n(7414),F=n(9947),V=n(1708),D=n(6681);const L=e=>{let{uploadPath:t,bucketName:n,forceDisable:i=!1,uploadFileFunction:a,uploadFolderFunction:r,overrideStyles:c={}}=e;const[d,h]=(0,s.useState)(null),[u,x]=(0,s.useState)(!1),p=(0,o.d4)((e=>e.system.anonymousMode)),j=(0,o.d4)((e=>e.console.session&&e.console.session.permissions||{})),g=[l.OV.S3_PUT_OBJECT,l.OV.S3_PUT_ACTIONS],b=T(j,t,g),f=Boolean(d),v=()=>{h(null)},S=(0,_._)([t,...b],g)||p,y=(0,_._)([n,...b],g,!1,!0),O=S||y;return(0,w.jsxs)(s.Fragment,{children:[(0,w.jsx)(D.A,{tooltip:O?"Upload Files":(0,l.vj)([l.OV.S3_PUT_OBJECT,l.OV.S3_PUT_ACTIONS],"upload files to this bucket"),children:(0,w.jsx)(m.$nd,{id:"upload-main","aria-controls":"upload-main-menu","aria-haspopup":"true","aria-expanded":f?"true":void 0,onClick:e=>{x(!u),h(e.currentTarget)},label:"Upload",icon:(0,w.jsx)(m.JMY,{}),variant:"callAction",disabled:i||!O,sx:c})}),(0,w.jsx)(m.Vey,{id:"upload-main-menu",options:[{label:"Upload File",icon:(0,w.jsx)(m.JMY,{}),value:"file",disabled:!S||i},{label:"Upload Folder",icon:(0,w.jsx)(m.nDF,{}),value:"folder",disabled:!y||i}],selectedOption:"",onSelect:e=>{"folder"!==e?a(v):r(v)},hideTriggerAction:()=>{x(!1)},open:u,anchorEl:d,anchorOrigin:"end",useAnchorWidth:!0})]})},P=e=>{let{open:t,closePanel:n,className:s="",children:o}=e;return(0,w.jsxs)(m.azJ,{id:"details-panel",sx:{borderColor:"#EAEDEE",borderWidth:0,borderStyle:"solid",borderRadius:3,borderBottomLeftRadius:0,borderBottomRightRadius:0,width:0,transitionDuration:"0.3s",overflowX:"hidden",overflowY:"auto",position:"relative",opacity:0,marginLeft:-1,"&.open":{width:300,minWidth:300,borderLeftWidth:1,opacity:1},"@media (max-width: 799px)":{"&.open":{width:"100%",minWidth:"100%",borderLeftWidth:0}}},className:"".concat(t?"open":""," ").concat(s),children:[(0,w.jsx)(m.$nd,{variant:"text",id:"close-details-list",onClick:n,icon:(0,w.jsx)(m._FR,{}),sx:{position:"absolute",right:5,top:18,padding:0,height:14,"&:hover:not(:disabled)":{backgroundColor:"transparent"}}}),o]})};var R=n(8245);const z=e=>{let{icon:t,strings:n}=e;return(0,w.jsxs)(m.azJ,{sx:{display:"flex",alignItems:"center","& .min-icon":{width:16,height:16,marginRight:4,minWidth:16,minHeight:16},"& .fileNameText":{whiteSpace:"pre",overflow:"hidden",textOverflow:"ellipsis"}},children:[t,(0,w.jsx)("span",{className:"fileNameText",children:(0,g.qf)(n[n.length-1])})]})},U=[{icon:(0,w.jsx)(m.FRZ,{}),extensions:["mp4","mov","avi","mpeg","mpg"]},{icon:(0,w.jsx)(m.jCy,{}),extensions:["mp3","m4a","aac"]},{icon:(0,w.jsx)(m.yTC,{}),extensions:["pdf"]},{icon:(0,w.jsx)(m.QvW,{}),extensions:["ppt","pptx"]},{icon:(0,w.jsx)(m.z9t,{}),extensions:["xls","xlsx"]},{icon:(0,w.jsx)(m.VSs,{}),extensions:["cer","crt","pem"]},{icon:(0,w.jsx)(m.bM2,{}),extensions:["html","xml","css","py","go","php","cpp","h","java"]},{icon:(0,w.jsx)(m.qM2,{}),extensions:["cfg","yaml"]},{icon:(0,w.jsx)(m.ITz,{}),extensions:["sql"]},{icon:(0,w.jsx)(m.PcO,{}),extensions:["ttf","otf"]},{icon:(0,w.jsx)(m.yEV,{}),extensions:["doc","docx","txt","rtf"]},{icon:(0,w.jsx)(m.j_m,{}),extensions:["zip","rar","tar","gz"]},{icon:(0,w.jsx)(m.DUd,{}),extensions:["epub","mobi","azw","azw3"]},{icon:(0,w.jsx)(m.nLN,{}),extensions:["jpeg","jpg","gif","tiff","png","heic","dng"]}],M=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e,s=(0,w.jsx)(m.KlI,{});e.endsWith("/")&&(s=(0,w.jsx)(m.kez,{}),n=e.slice(0,-1));const o=e.toLowerCase();for(const a of U)for(const e of a.extensions)o.endsWith(".".concat(e))&&(s=a.icon);!e.endsWith("/")&&e.indexOf(".")<0&&(s=(0,w.jsx)(m.YJK,{}));const i=n.split("/");return t?s:(0,w.jsx)(z,{icon:s,strings:i})};var G=n(7524);const J=e=>{let{metaData:t}=e;const n=Object.keys(t);return(0,w.jsx)(s.Fragment,{children:n.map(((e,n)=>{const s=(e=>Array.isArray(e)?e.map(g.Tw).join(", "):(0,g.Tw)(e))(t[e]);return(0,w.jsxs)(m.azJ,{sx:{marginBottom:15,fontSize:14,maxHeight:180,overflowY:"auto"},children:[(0,w.jsx)("strong",{children:e}),(0,w.jsx)("br",{}),s]},"box-meta-".concat(e,"-").concat(n.toString()))}))})};var W=n(718),K=n(8661),H=n(5448);const Y=e=>{let{closeDeleteModalAndRefresh:t,deleteOpen:n,selectedBucket:i,selectedObject:a,versioningInfo:c,selectedVersion:d=""}=e;const h=(0,r.j)(),[u,x]=(0,H.A)((()=>t(!0)),(e=>{h((0,O.C9)(e)),"Access Denied."===e.detailedError&&t(!0)})),[p,j]=(0,s.useState)(!1),[g,b]=(0,s.useState)(!1),f=(0,o.d4)((e=>e.objectBrowser.retentionConfig)),v=(0,_._)([i],[l.OV.S3_BYPASS_GOVERNANCE_RETENTION])&&"governance"===(null===f||void 0===f?void 0:f.mode);if(!a)return null;return(0,w.jsx)(K.A,{title:"Delete Object",confirmText:"Delete",isOpen:n,titleIcon:(0,w.jsx)(m.xWY,{}),isLoading:u,onConfirm:()=>{const e=a.endsWith("/");x("DELETE","/api/v1/buckets/".concat(encodeURIComponent(i),"/objects?prefix=").concat(encodeURIComponent(a)).concat(""!==d?"&version_id=".concat(encodeURIComponent(d)):"&recursive=".concat(e,"&all_versions=").concat(p)).concat(g?"&bypass=true":""))},onClose:()=>t(!1),confirmationContent:(0,w.jsxs)(s.Fragment,{children:["Are you sure you want to delete: ",(0,w.jsx)("br",{}),(0,w.jsx)("b",{children:a})," ",""!==d?(0,w.jsxs)(s.Fragment,{children:[(0,w.jsx)("br",{}),(0,w.jsx)("br",{}),"Version ID:",(0,w.jsx)("br",{}),(0,w.jsx)("strong",{children:d})]}):"","? ",(0,w.jsx)("br",{}),(0,w.jsx)("br",{}),N(null===c||void 0===c?void 0:c.status)&&""===d&&(0,w.jsx)(s.Fragment,{children:(0,w.jsx)(m.dOG,{label:"Delete All Versions",indicatorLabels:["Yes","No"],checked:p,value:"delete_versions",id:"delete-versions",name:"delete-versions",onChange:e=>{j(!p)},description:""})}),v&&(p||""!==d)&&(0,w.jsx)(s.Fragment,{children:(0,w.jsx)("div",{style:{marginTop:10},children:(0,w.jsx)(m.dOG,{label:"Bypass Governance Mode",indicatorLabels:["Yes","No"],checked:g,value:"bypass_governance",id:"bypass_governance",name:"bypass_governance",onChange:e=>{b(!g)},description:""})})}),p&&(0,w.jsxs)(s.Fragment,{children:[(0,w.jsxs)("div",{style:{marginTop:10,border:"#c83b51 1px solid",borderRadius:3,padding:5,backgroundColor:"#c83b5120",color:"#c83b51"},children:["This will remove the object as well as all of its versions,"," ",(0,w.jsx)("br",{}),"This action is irreversible."]}),(0,w.jsx)("br",{}),"Are you sure you want to continue?"]})]})})};var Z=n(4141),$=n(7403);const q=v.Ay.b((e=>{let{theme:t}=e;return{color:u()(t,"signalColors.danger","#C83B51"),marginLeft:5}})),Q=e=>{var t;let{modalOpen:n,onCloseAndUpdate:i,bucketName:c,actualInfo:h}=e;const p=(0,r.j)(),j=(0,o.d4)(O.Rq),[g,b]=(0,s.useState)(""),[f,v]=(0,s.useState)(""),[S,y]=(0,s.useState)(!1),[C,T]=(0,s.useState)(!1),[E,A]=(0,s.useState)(""),[I,k]=(0,s.useState)(""),N=h.tags,B=Object.keys(N||{}),F=null===(t=h.name)||void 0===t?void 0:t.split("/"),V=(null===F||void 0===F?void 0:F.pop())||"",D=e=>(0,w.jsxs)(m.azJ,{sx:{fontSize:16,margin:"20px 0 30px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%"},children:["Tag",e?"s":""," for: ",(0,w.jsx)("strong",{children:V})]});return(0,w.jsx)(s.Fragment,{children:(0,w.jsx)(Z.A,{modalOpen:n,title:C?"Delete Tag":"Edit Tags",onClose:()=>{i(!0)},iconColor:C?"delete":"default",titleIcon:C?(0,w.jsx)(m.aaC,{}):(0,w.jsx)(m.cGQ,{}),children:C?(0,w.jsx)(s.Fragment,{children:(0,w.jsxs)(m.xA9,{container:!0,children:[D(!1),"Are you sure you want to delete the tag"," ",(0,w.jsxs)(q,{children:[E," : ",I]})," ","?",(0,w.jsxs)(m.xA9,{item:!0,xs:12,sx:$.U.modalButtonBar,children:[(0,w.jsx)(m.$nd,{id:"cancel",type:"button",variant:"regular",onClick:()=>{A(""),k(""),T(!1)},label:"Cancel"}),(0,w.jsx)(m.$nd,{type:"submit",variant:"secondary",onClick:()=>{const e=(0,d.A)({},N);delete e[E];const t=j?h.version_id||"":"null";a.F.buckets.putObjectTags(c,{prefix:h.name||"",version_id:t},{tags:e}).then((()=>{i(!0),y(!1)})).catch((e=>{p((0,O.Dy)((0,x.S)(e.error))),y(!1)}))},id:"deleteTag",label:"Delete Tag"})]})]})}):(0,w.jsxs)(m.azJ,{children:[(0,w.jsx)(_.R,{scopes:[l.OV.S3_GET_OBJECT_TAGGING,l.OV.S3_GET_ACTIONS],resource:c,children:(0,w.jsxs)(m.azJ,{sx:{display:"flex",flexFlow:"column",width:"100%"},children:[D(!0),(0,w.jsxs)(m.azJ,{sx:{fontSize:14,fontWeight:"normal"},children:["Current Tags:",(0,w.jsx)("br",{}),0===B.length?(0,w.jsx)("span",{className:"muted",children:"There are no tags for this object"}):(0,w.jsx)(s.Fragment,{}),(0,w.jsx)(m.azJ,{sx:{marginTop:"5px",marginBottom:"15px"},children:B.map(((e,t)=>{const n=u()(N,"".concat(e),"");return""!==n?(0,w.jsx)(_.R,{scopes:[l.OV.S3_DELETE_OBJECT_TAGGING,l.OV.S3_DELETE_ACTIONS],resource:c,errorProps:{deleteIcon:null,onDelete:null},children:(0,w.jsx)(m.vwO,{id:"".concat(e," : ").concat(n),label:"".concat(e," : ").concat(n),variant:"regular",color:"default",onDelete:()=>{((e,t)=>{A(e),k(t),T(!0)})(e,n)}})},"chip-".concat(t)):null}))})]})]})}),(0,w.jsx)(_.R,{scopes:[l.OV.S3_PUT_OBJECT_TAGGING,l.OV.S3_PUT_ACTIONS],resource:c,errorProps:{disabled:!0,onClick:null},children:(0,w.jsxs)(m.azJ,{children:[(0,w.jsx)(m._xt,{icon:(0,w.jsx)(m.b_$,{}),separator:!1,children:"Add New Tag"}),(0,w.jsxs)(m.Hbc,{containerPadding:!1,withBorders:!1,children:[(0,w.jsx)(m.cl_,{value:g,label:"Tag Key",id:"newTagKey",name:"newTagKey",placeholder:"Enter Tag Key",onChange:e=>{b(e.target.value)}}),(0,w.jsx)(m.cl_,{value:f,label:"Tag Label",id:"newTagLabel",name:"newTagLabel",placeholder:"Enter Tag Label",onChange:e=>{v(e.target.value)}}),(0,w.jsxs)(m.xA9,{item:!0,xs:12,sx:$.U.modalButtonBar,children:[(0,w.jsx)(m.$nd,{id:"clear",type:"button",variant:"regular",color:"primary",onClick:()=>{v(""),b("")},label:"Clear"}),(0,w.jsx)(m.$nd,{type:"submit",variant:"callAction",disabled:""===f.trim()||""===g.trim()||S,onClick:()=>{y(!0);const e={};e[g]=f;const t=(0,d.A)((0,d.A)({},N),e),n=j?h.version_id||"":"null";a.F.buckets.putObjectTags(c,{prefix:h.name||"",version_id:n},{tags:t}).then((()=>{i(!0),y(!1)})).catch((e=>{p((0,O.Dy)((0,x.S)(e.error))),y(!1)}))},id:"saveTag",label:"Save"})]})]})]})})]})})})},X=e=>{let{open:t,closeModal:n,currentItem:o,internalPaths:i,actualInfo:a,bucketName:l}=e;const c=(0,r.j)(),[d,h]=(0,s.useState)(o),[u,x]=(0,s.useState)(!1);return(0,w.jsxs)(Z.A,{title:"Rename Download",modalOpen:t,onClose:n,titleIcon:(0,w.jsx)(m.qUP,{}),children:[(0,w.jsxs)("div",{children:["The file you are trying to download has a long name.",(0,w.jsx)("br",{}),"This can cause issues on Windows Systems by trimming the file name after download.",(0,w.jsx)("br",{}),(0,w.jsx)("br",{})," We recommend to rename the file download"]}),(0,w.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:e=>{(e=>{e.preventDefault(),(0,R._)(c,l,i,a),n()})(e)},children:(0,w.jsxs)(m.Hbc,{withBorders:!1,containerPadding:!1,children:[(0,w.jsx)(m.cl_,{id:"download-filename",name:"download-filename",onChange:e=>{h(e.target.value)},label:"",type:"text",value:d,error:d.length>200&&!u?"Filename should be less than 200 characters long.":""}),(0,w.jsx)(m.dOG,{value:"acceptLongName",id:"acceptLongName",name:"acceptLongName",checked:u,onChange:e=>{x(e.target.checked),e.target.checked&&h(o)},label:"Use Original Name"}),(0,w.jsx)(m.xA9,{item:!0,xs:12,sx:$.U.modalButtonBar,children:(0,w.jsx)(m.$nd,{id:"download-file",type:"submit",variant:"callAction",color:"primary",disabled:d.length>200&&!u,label:"Download File"})})]})})]})},ee={is_latest:!0,last_modified:"",legal_hold_status:"",name:"",retention_mode:"",retention_until_date:"",size:0,tags:{},version_id:void 0},te=e=>{let{internalPaths:t,bucketName:n,versioningInfo:i,onClosePanel:d}=e;const h=(0,r.j)(),x=(0,o.d4)(O.Rq),p=(0,o.d4)((e=>e.objectBrowser.versionsMode)),j=(0,o.d4)((e=>e.objectBrowser.selectedVersion)),b=(0,o.d4)((e=>e.objectBrowser.loadingObjectInfo)),[f,v]=(0,s.useState)(!1),[S,y]=(0,s.useState)(!1),[C,T]=(0,s.useState)(null),[E,A]=(0,s.useState)([]),[I,N]=(0,s.useState)(null),[B,F]=(0,s.useState)([]),[V,L]=(0,s.useState)(!1),[P,z]=(0,s.useState)(!1),[U,K]=(0,s.useState)(0),[H,Z]=(0,s.useState)(!1),[$,q]=(0,s.useState)(!1),[te,ne]=(0,s.useState)(null),[se,oe]=(0,s.useState)(!1),ie=(t||"").split("/").pop()||"";let ae=[];C&&C.name&&(ae=C.name.split("/")),(0,s.useEffect)((()=>{if(x&&E&&E.length>=1){let e=E.find((e=>e.is_latest))||ee;""!==j&&(e=E.find((e=>e.version_id===j))||ee),e.is_delete_marker||oe(!0),T(e)}}),[j,x,E]),(0,s.useEffect)((()=>{b&&""!==t&&a.F.buckets.listObjects(n,{prefix:t,with_versions:x,limit:21}).then((e=>{const t=e.data.objects||[];if(x){Z(t.length>20),t.splice(20),A(t),F(t);const e=t.reduce(((e,t)=>null!==t&&void 0!==t&&t.size?e+t.size:e),0);K(e)}else{const e=t[0];T(e),F([]),e.is_delete_marker||oe(!0)}h((0,c.oe)(!1))})).catch((e=>{console.error("Error loading object details",e.error),h((0,c.oe)(!1))}))}),[b,n,t,h,x,j]),(0,s.useEffect)((()=>{se&&""!==t&&a.F.buckets.getObjectMetadata(n,{prefix:t,versionID:(null===C||void 0===C?void 0:C.version_id)||""}).then((e=>{let t=u()(e.data,"objectMetadata",{});ne(t),oe(!1)})).catch((e=>{console.error("Error Getting Metadata Status: ",e.detailedError),oe(!1)}))}),[n,t,se,null===C||void 0===C?void 0:C.version_id]);let re=[];C&&C.tags&&(re=Object.keys(C.tags));const le=(0,w.jsx)("div",{style:{textAlign:"center",marginTop:35},children:(0,w.jsx)(m.aHM,{})});if(!C)return b?le:null;const ce=ae.length>0?ae[ae.length-1]:C.name,de=[n,ie,[n,C.name].join("/")],he=(0,_._)(de,[l.OV.S3_PUT_OBJECT_TAGGING,l.OV.S3_PUT_ACTIONS]),ue=(0,_._)(de,[l.OV.S3_GET_BUCKET_VERSIONING,l.OV.S3_PUT_BUCKET_VERSIONING,l.OV.S3_GET_OBJECT_VERSION,l.OV.S3_GET_ACTIONS,l.OV.S3_PUT_ACTIONS]),me=(0,_._)(de,[l.OV.S3_GET_OBJECT,l.OV.S3_GET_ACTIONS]),xe=(0,_._)([n,ie,[n,C.name].join("/")],[l.OV.S3_DELETE_OBJECT,l.OV.S3_DELETE_ACTIONS]);let pe=(0,k.IZ)(te,ie);const je=[{action:()=>{(0,R._)(h,n,t,C)},label:"Download",disabled:!!C.is_delete_marker||!me,icon:(0,w.jsx)(m.s3U,{}),tooltip:me?"Download this Object":(0,l.vj)([l.OV.S3_GET_OBJECT,l.OV.S3_GET_ACTIONS],"download this object")},{action:()=>{v(!0)},label:"Share",disabled:!!C.is_delete_marker||!me,icon:(0,w.jsx)(m.liv,{}),tooltip:me?"Share this File":(0,l.vj)([l.OV.S3_GET_OBJECT,l.OV.S3_GET_ACTIONS],"share this object")},{action:()=>{z(!0)},label:"Preview",disabled:!!C.is_delete_marker||"none"===pe&&!me,icon:(0,w.jsx)(m.cyn,{}),tooltip:me?"Preview this File":(0,l.vj)([l.OV.S3_GET_OBJECT,l.OV.S3_GET_ACTIONS],"preview this object")},{action:()=>{y(!0)},label:"Tags",disabled:!!C.is_delete_marker||""!==j||!he,icon:(0,w.jsx)(m.P3Z,{}),tooltip:he?"Change Tags for this File":(0,l.vj)([l.OV.S3_PUT_OBJECT_TAGGING,l.OV.S3_GET_OBJECT_TAGGING,l.OV.S3_GET_ACTIONS,l.OV.S3_PUT_ACTIONS],"set Tags on this object")},{action:()=>{h((0,c.cQ)({status:!p,objectName:ce}))},label:p?"Hide Object Versions":"Display Object Versions",icon:(0,w.jsx)(m.j1U,{}),disabled:!x||!(C.version_id&&"null"!==C.version_id)||!ue,tooltip:ue?C.version_id&&"null"!==C.version_id?"Display Versions for this file":"":(0,l.vj)([l.OV.S3_GET_BUCKET_VERSIONING,l.OV.S3_PUT_BUCKET_VERSIONING,l.OV.S3_GET_OBJECT_VERSION,l.OV.S3_GET_ACTIONS,l.OV.S3_PUT_ACTIONS],"display all versions of this object")}];return(0,w.jsxs)(s.Fragment,{children:[f&&C&&(0,w.jsx)(W.default,{open:f,closeModalAndRefresh:()=>{N(null),v(!1)},bucketName:n,dataObject:I||C}),V&&(0,w.jsx)(Y,{deleteOpen:V,selectedBucket:n,selectedObject:t,closeDeleteModalAndRefresh:e=>{L(!1),e&&""===j?d(!0):(h((0,c.SK)(!0)),h((0,c.Ai)("")),h((0,c.oe)(!0)))},versioningInfo:x?i:void 0,selectedVersion:j}),P&&C&&(0,w.jsx)(G.default,{open:P,bucketName:n,actualInfo:C,onClosePreview:()=>{z(!1)}}),S&&C&&(0,w.jsx)(Q,{modalOpen:S,bucketName:n,actualInfo:C,onCloseAndUpdate:e=>{y(!1),e&&h((0,c.oe)(!0))}}),$&&C&&(0,w.jsx)(X,{open:$,closeModal:()=>{q(!1)},currentItem:ie,bucketName:n,internalPaths:t,actualInfo:C}),b?(0,w.jsx)(s.Fragment,{children:le}):(0,w.jsxs)(m.azJ,{sx:{"& .ObjectDetailsTitle":{display:"flex",alignItems:"center","& .min-icon":{width:26,height:26,minWidth:26,minHeight:26}},"& .objectNameContainer":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",alignItems:"center",marginLeft:10},"& .capitalizeFirst":{textTransform:"capitalize"},"& .detailContainer":{padding:"0 22px",marginBottom:10,fontSize:14}},children:[(0,w.jsx)(m.Smc,{title:(0,w.jsxs)("div",{className:"ObjectDetailsTitle",children:[M(ce||"",!0),(0,w.jsx)("span",{className:"objectNameContainer",children:ce})]}),items:je}),(0,w.jsx)(D.A,{tooltip:xe?"":(0,l.vj)([l.OV.S3_DELETE_OBJECT,l.OV.S3_DELETE_ACTIONS],"delete this object"),children:(0,w.jsx)(m.xA9,{item:!0,xs:12,sx:{justifyContent:"center",display:"flex"},children:(0,w.jsx)(_.R,{resource:[n,ie,[n,C.name].join("/")],scopes:[l.OV.S3_DELETE_OBJECT,l.OV.S3_DELETE_ACTIONS],errorProps:{disabled:!0},children:(0,w.jsx)(m.$nd,{id:"delete-element-click",icon:(0,w.jsx)(m.d7y,{}),iconLocation:"start",fullWidth:!0,variant:"secondary",onClick:()=>{L(!0)},disabled:""===j&&C.is_delete_marker,sx:{width:"calc(100% - 44px)",margin:"8px 0"},label:"Delete".concat(""!==j?" version":"")})})})}),(0,w.jsx)(m.kCK,{icon:(0,w.jsx)(m.Hch,{}),label:"Object Info"}),(0,w.jsxs)(m.azJ,{className:"detailContainer",children:[(0,w.jsx)("strong",{children:"Name:"}),(0,w.jsx)("br",{}),(0,w.jsx)("div",{style:{overflowWrap:"break-word"},children:ce})]}),""!==j&&(0,w.jsxs)(m.azJ,{className:"detailContainer",children:[(0,w.jsx)("strong",{children:"Version ID:"}),(0,w.jsx)("br",{}),j]}),(0,w.jsxs)(m.azJ,{className:"detailContainer",children:[(0,w.jsx)("strong",{children:"Size:"}),(0,w.jsx)("br",{}),(0,g.nO)("".concat(C.size||"0"))]}),C.version_id&&"null"!==C.version_id&&""===j&&(0,w.jsxs)(m.azJ,{className:"detailContainer",children:[(0,w.jsx)("strong",{children:"Versions:"}),(0,w.jsx)("br",{}),B.length,H?"+":""," version",1!==B.length?"s":"",","," ",(0,g.qO)(U),H?"+":""]}),""===j&&(0,w.jsxs)(m.azJ,{className:"detailContainer",children:[(0,w.jsx)("strong",{children:"Last Modified:"}),(0,w.jsx)("br",{}),(e=>{const t=new Date,n=new Date(e),s=t.getTime()-n.getTime(),o=(0,g.eQ)(s,"ms");return""!==o.trim()?"".concat(o," ago"):"Just now"})(C.last_modified||"")]}),(0,w.jsxs)(m.azJ,{className:"detailContainer",children:[(0,w.jsx)("strong",{children:"ETAG:"}),(0,w.jsx)("br",{}),C.etag||"N/A"]}),(0,w.jsxs)(m.azJ,{className:"detailContainer",children:[(0,w.jsx)("strong",{children:"Tags:"}),(0,w.jsx)("br",{}),0===re.length?"N/A":re.map(((e,t)=>(0,w.jsxs)("span",{children:[e,":",u()(C,"tags.".concat(e),""),t<re.length-1?", ":""]},"key-vs-".concat(t.toString()))))]}),(0,w.jsx)(m.azJ,{className:"detailContainer",children:(0,w.jsx)(_.R,{scopes:[l.OV.S3_GET_OBJECT_LEGAL_HOLD,l.OV.S3_GET_ACTIONS],resource:n,children:(0,w.jsxs)(s.Fragment,{children:[(0,w.jsx)("strong",{children:"Legal Hold:"}),(0,w.jsx)("br",{}),C.legal_hold_status?"On":"Off"]})})}),(0,w.jsx)(m.azJ,{className:"detailContainer",children:(0,w.jsx)(_.R,{scopes:[l.OV.S3_GET_OBJECT_RETENTION,l.OV.S3_GET_ACTIONS],resource:n,children:(0,w.jsxs)(s.Fragment,{children:[(0,w.jsx)("strong",{children:"Retention Policy:"}),(0,w.jsx)("br",{}),(0,w.jsx)("span",{className:"capitalizeFirst",children:(C.version_id&&C.version_id,(0,w.jsx)(s.Fragment,{children:C.retention_mode?C.retention_mode.toLowerCase():"None"}))})]})})}),!C.is_delete_marker&&(0,w.jsxs)(s.Fragment,{children:[(0,w.jsx)(m.kCK,{label:"Metadata",icon:(0,w.jsx)(m.$vN,{})}),(0,w.jsx)(m.azJ,{className:"detailContainer",children:C&&te?(0,w.jsx)(J,{metaData:te}):null})]})]})]})},ne=e=>{let{versionToRestore:t,bucketName:n,objectPath:o,restoreOpen:i,onCloseAndUpdate:l}=e;const d=(0,r.j)(),[h,u]=(0,s.useState)(!1);return(0,w.jsx)(K.A,{title:"Restore File Version",confirmText:"Restore",isOpen:i,isLoading:h,titleIcon:(0,w.jsx)(m.YkU,{}),onConfirm:()=>{u(!0),a.F.buckets.putObjectRestore(n,{prefix:o,version_id:t.version_id||""}).then((()=>{u(!1),l(!0),d((0,c.NV)({prefix:o,objectInfo:t}))})).catch((e=>{d((0,O.C9)((0,x.S)(e.error))),u(!1)}))},confirmButtonProps:{variant:"secondary",disabled:h},onClose:()=>{l(!1)},confirmationContent:(0,w.jsxs)(m.azJ,{id:"alert-dialog-description",children:["Are you sure you want to restore ",(0,w.jsx)("br",{}),(0,w.jsx)("b",{children:o})," ",(0,w.jsx)("br",{})," with Version ID:",(0,w.jsx)("br",{}),(0,w.jsx)("b",{children:t.version_id}),"?"]})})},se=e=>{let{type:t}=e,n="#000",s="";switch(t){case"null":n="#07193E",s="NULL VERSION";break;case"deleted":n="#868686",s="DELETED";break;default:n="#174551",s="CURRENT VERSION"}return(0,w.jsx)("span",{style:{backgroundColor:n,padding:"0 5px",display:"inline-block",color:"#FFF",fontWeight:"bold",fontSize:12,borderRadius:2,whiteSpace:"nowrap",margin:"0 10px"},children:s})},oe=v.Ay.div((e=>{let{theme:t}=e;return{"&:before":{content:"' '",display:"block",position:"absolute",width:"2px",height:"calc(100% + 2px)",backgroundColor:u()(t,"borderColor","#F8F8F8"),left:"24px"},"& .mainFileVersionItem":{borderBottom:"".concat(u()(t,"borderColor","#F8F8F8")," 1px solid"),padding:"1rem 0",margin:"0 0.5rem 0 2.5rem",cursor:"pointer","&.deleted":{color:"#868686"}},"& .intermediateLayer":{margin:"0 1.5rem 0 1.5rem","&:hover, &.selected":{backgroundColor:u()(t,"boxBackground","#F8F8F8"),"& > div":{borderBottomColor:u()(t,"boxBackground","#F8F8F8")}}},"& .versionContainer":{fontSize:16,fontWeight:"bold",display:"flex",alignItems:"center","& svg.min-icon":{width:18,height:18,minWidth:18,minHeight:18,marginRight:10}},"& .buttonContainer":{textAlign:"right","& button":{marginLeft:"1.5rem"}},"& .versionID":{fontSize:"12px",margin:"2px 0",whiteSpace:"nowrap",textOverflow:"ellipsis",maxWidth:"95%",overflow:"hidden"},"& .versionData":{marginRight:"10px",fontSize:12,color:"#868686"},"@media (max-width: 600px)":{"& .buttonContainer":{"& button":{marginLeft:"5px"}}},"@media (max-width: 799px)":{"&:before":{display:"none"},"& .mainFileVersionItem":{padding:"5px 0px",margin:0},"& .intermediateLayer":{margin:0,"&:hover, &.selected":{backgroundColor:"transparent","& > div":{borderBottomColor:u()(t,"boxBackground","#F8F8F8")}}},"& .versionContainer":{fontSize:14,"& svg.min-icon":{display:"none"}},"& .versionData":{textOverflow:"ellipsis",maxWidth:"95%",overflow:"hidden",whiteSpace:"nowrap"},"& .collapsableInfo":{display:"flex",flexDirection:"column"},"& .versionItem":{display:"none"}}}})),ie=e=>{let{fileName:t,versionInfo:n,isSelected:s,checkable:o,isChecked:i,onCheck:a,onShare:r,onDownload:l,onRestore:c,onPreview:d,globalClick:h,index:u,key:x,style:p}=e;const b=n.is_delete_marker,f=[{icon:(0,w.jsx)(m.cyn,{}),action:d,tooltip:"Preview"},{icon:(0,w.jsx)(m.s3U,{}),action:l,tooltip:"Download this version"},{icon:(0,w.jsx)(m.liv,{}),action:r,tooltip:"Share this version"},{icon:(0,w.jsx)(m.YkU,{}),action:c,tooltip:"Restore this version"}];let v=null;n.is_delete_marker?v="deleted":n.is_latest?v="current":"null"===n.version_id&&(v="null");let S=j.c9.now();return n.last_modified&&(S=j.c9.fromISO(n.last_modified)),(0,w.jsx)(oe,{children:(0,w.jsx)(m.xA9,{container:!0,className:"ctrItem",onClick:()=>{h(n)},style:p,children:(0,w.jsx)(m.xA9,{item:!0,xs:12,className:"intermediateLayer".concat(" ",s?"selected":""),children:(0,w.jsxs)(m.xA9,{item:!0,xs:!0,className:"mainFileVersionItem ".concat(n.is_delete_marker?"deleted":""),children:[(0,w.jsx)(m.xA9,{item:!0,xs:12,children:(0,w.jsxs)(m.xA9,{container:!0,children:[(0,w.jsxs)(m.xA9,{item:!0,xs:!0,md:4,className:"versionContainer",children:[o&&(0,w.jsx)(m.Sc0,{checked:i,id:"select-".concat(n.version_id),name:"select-".concat(n.version_id),onChange:e=>{e.stopPropagation(),a(n.version_id||"")},value:n.version_id||"",disabled:n.is_delete_marker,sx:{width:"initial"}}),M(t,!0)," v",u.toString(),(0,w.jsx)("span",{className:"versionItem",children:v&&(0,w.jsx)(se,{type:v})})]}),(0,w.jsx)(m.xA9,{item:!0,xs:10,md:8,className:"buttonContainer",children:f.map(((e,t)=>(0,w.jsx)(m.m_M,{tooltip:e.tooltip,children:(0,w.jsx)(m.K0,{size:"small",id:"version-action-".concat(e.tooltip,"-").concat(t.toString()),className:"spacing".concat(" ",b?"buttonDisabled":""),disabled:b,onClick:t=>{t.stopPropagation(),b?t.preventDefault():e.action(n)},sx:{backgroundColor:"#F8F8F8",borderRadius:"100%",width:"28px",height:"28px",padding:"5px","& .min-icon":{width:"14px",height:"14px"}},children:e.icon})},"version-action-".concat(e.tooltip,"-").concat(t.toString()))))})]})}),(0,w.jsx)(m.xA9,{item:!0,xs:12,className:"versionID",children:"null"!==n.version_id?n.version_id:"-"}),(0,w.jsxs)(m.xA9,{item:!0,xs:12,className:"collapsableInfo",children:[(0,w.jsxs)("span",{className:"versionData",children:[(0,w.jsx)("strong",{children:"Last modified:"})," ",S.toFormat("ccc, LLL dd yyyy HH:mm:ss (ZZZZ)")]}),(0,w.jsxs)("span",{className:"versionData",children:[(0,w.jsx)("strong",{children:"Size:"})," ",(0,g.nO)("".concat(n.size||"0"))]})]})]})})},x)})},ae=e=>{let{closeDeleteModalAndRefresh:t,deleteOpen:n,selectedBucket:i,selectedObject:c}=e;const d=(0,r.j)(),[h,u]=(0,s.useState)(!1),[p,j]=(0,s.useState)(""),[g,b]=(0,s.useState)(!1),f=(0,o.d4)((e=>e.objectBrowser.retentionConfig)),v=(0,_._)([i],[l.OV.S3_BYPASS_GOVERNANCE_RETENTION])&&"governance"===(null===f||void 0===f?void 0:f.mode);if((0,s.useEffect)((()=>{h&&a.F.buckets.deleteObject(i,{prefix:c,non_current_versions:!0,bypass:g}).then((()=>{t(!0)})).catch((e=>{d((0,O.C9)((0,x.S)(e.error))),u(!1)}))}),[h,t,d,c,i,g]),!c)return null;return(0,w.jsx)(K.A,{title:"Delete Non-Current versions",confirmText:"Delete",isOpen:n,titleIcon:(0,w.jsx)(m.xWY,{}),isLoading:h,onConfirm:()=>{u(!0)},onClose:()=>t(!1),confirmButtonProps:{disabled:"YES, PROCEED"!==p||h},confirmationContent:(0,w.jsxs)(s.Fragment,{children:["Are you sure you want to delete all the non-current versions for:"," ",(0,w.jsx)("b",{children:c}),"? ",(0,w.jsx)("br",{}),v&&(0,w.jsx)(s.Fragment,{children:(0,w.jsx)("div",{style:{marginTop:10},children:(0,w.jsx)(m.dOG,{label:"Bypass Governance Mode",indicatorLabels:["Yes","No"],checked:g,value:"bypass_governance",id:"bypass_governance",name:"bypass_governance",onChange:e=>{b(!g)},description:""})})}),(0,w.jsx)("br",{}),"To continue please type ",(0,w.jsx)("b",{children:"YES, PROCEED"})," in the box.",(0,w.jsx)("br",{}),(0,w.jsx)("br",{}),(0,w.jsx)(m.xA9,{item:!0,xs:12,children:(0,w.jsx)(m.cl_,{id:"type-confirm",name:"retype-tenant",onChange:e=>{j(e.target.value)},label:"",value:p})})]})})},re=e=>{let{closeDeleteModalAndRefresh:t,deleteOpen:n,selectedBucket:i,selectedVersions:c,selectedObject:d}=e;const h=(0,r.j)(),[u,p]=(0,s.useState)(!1),[j,g]=(0,s.useState)(!1),b=(0,o.d4)((e=>e.objectBrowser.retentionConfig)),f=(0,_._)([i],[l.OV.S3_BYPASS_GOVERNANCE_RETENTION])&&"governance"===(null===b||void 0===b?void 0:b.mode);return(0,s.useEffect)((()=>{if(u){const e=c.map((e=>({path:d,versionID:e,recursive:!1})));e.length>0&&a.F.buckets.deleteMultipleObjects(i,e,{all_versions:!1,bypass:j}).then((()=>{p(!1),t(!0)})).catch((e=>{h((0,O.C9)((0,x.S)(e.error))),p(!1)}))}}),[u,t,i,d,c,j,h]),c?(0,w.jsx)(K.A,{title:"Delete Selected Versions",confirmText:"Delete",isOpen:n,titleIcon:(0,w.jsx)(m.xWY,{}),isLoading:u,onConfirm:()=>{p(!0)},onClose:()=>t(!1),confirmationContent:(0,w.jsxs)(s.Fragment,{children:["Are you sure you want to delete the selected ",c.length," ","versions for ",(0,w.jsx)("strong",{children:d}),"?",f&&(0,w.jsx)(s.Fragment,{children:(0,w.jsx)("div",{style:{marginTop:10},children:(0,w.jsx)(m.dOG,{label:"Bypass Governance Mode",indicatorLabels:["Yes","No"],checked:j,value:"bypass_governance",id:"bypass_governance",name:"bypass_governance",onChange:e=>{g(!j)},description:""})})})]})}):null};var le=n(8998);const ce={is_latest:!0,last_modified:"",legal_hold_status:"",name:"",retention_mode:"",retention_until_date:"",size:0,tags:{},version_id:void 0},de=e=>{let{internalPaths:t,bucketName:n}=e;const i=(0,r.j)(),l=(0,o.d4)((e=>e.objectBrowser.searchVersions)),d=(0,o.d4)((e=>e.objectBrowser.loadingVersions)),h=(0,o.d4)((e=>e.objectBrowser.selectedVersion)),p=(0,o.d4)(O.Rq),[j,b]=(0,s.useState)(!1),[f,v]=(0,s.useState)(null),[S,_]=(0,s.useState)(null),[y,C]=(0,s.useState)([]),[T,E]=(0,s.useState)(!1),[A,k]=(0,s.useState)(!1),[N,B]=(0,s.useState)(null),[F,V]=(0,s.useState)("date"),[L,P]=(0,s.useState)(!1),[z,U]=(0,s.useState)(!1),[M,J]=(0,s.useState)(!1),[K,H]=(0,s.useState)([]),[Y,Z]=(0,s.useState)(!1);let $=[];f&&f.name&&($=f.name.split("/")),(0,s.useEffect)((()=>{d||f||i((0,c.SK)(!0))}),[d,f,i]),(0,s.useEffect)((()=>{d&&""!==t&&a.F.buckets.listObjects(n,{prefix:t,with_versions:p,limit:21}).then((e=>{const n=u()(e.data,"objects",[]);E(n.length>20),n.splice(20);const s=n.filter((e=>e.name===t));p?(v(s.find((e=>e.is_latest))||ce),C(s)):(v(s[0]),C([])),i((0,c.SK)(!1))})).catch((e=>{i((0,O.C9)((0,x.S)(e.error))),i((0,c.SK)(!1))}))}),[d,n,t,i,p]);const q=e=>{_(e),b(!0)},Q=e=>{_(e),P(!0)},X=e=>{B(e),k(!0)},ee=e=>{(0,R._)(i,n,t,e)},te=e=>{i((0,c.Ai)(e.version_id||""))},se=y.filter((e=>!!e.version_id&&e.version_id.includes(l))),oe=y.reduce(((e,t)=>t.size?e+t.size:e),0);se.sort(((e,t)=>{if("size"===F)return e.size&&t.size?e.size<t.size?-1:e.size>t.size?1:0:0;{const n=new Date(e.last_modified||"").getTime(),s=new Date(t.last_modified||"").getTime();return n<s?1:n>s?-1:0}}));const de=e=>{if(K.includes(e)){const t=K.filter((t=>t!==e));return void H(t)}const t=[...K];t.push(e),H(t)};return(0,w.jsxs)(s.Fragment,{children:[j&&f&&(0,w.jsx)(W.default,{open:j,closeModalAndRefresh:()=>{_(null),b(!1),P(!1)},bucketName:n,dataObject:S||f}),A&&f&&N&&(0,w.jsx)(ne,{restoreOpen:A,bucketName:n,versionToRestore:N,objectPath:f.name||"",onCloseAndUpdate:e=>{k(!1),B(null),e&&(i((0,c.SK)(!0)),i((0,c.oe)(!0)))}}),L&&f&&(0,w.jsx)(G.default,{open:L,bucketName:n,actualInfo:{name:f.name||"",version_id:S&&S.version_id?S.version_id:"null",size:S&&S.size?S.size:0,content_type:"",last_modified:f.last_modified||""},onClosePreview:()=>{P(!1)}}),z&&(0,w.jsx)(ae,{deleteOpen:z,closeDeleteModalAndRefresh:e=>{U(!1),e&&(i((0,c.SK)(!0)),i((0,c.Ai)("")),i((0,c.oe)(!0)))},selectedBucket:n,selectedObject:t}),Y&&(0,w.jsx)(re,{selectedBucket:n,selectedObject:t,deleteOpen:Y,selectedVersions:K,closeDeleteModalAndRefresh:e=>{Z(!1),e&&(i((0,c.SK)(!0)),i((0,c.Ai)("")),i((0,c.oe)(!0)),H([]))}}),(0,w.jsxs)(m.xA9,{container:!0,sx:{width:"100%",padding:10,"@media (max-width: 799px)":{minHeight:800}},children:[!f&&(0,w.jsx)(m.xA9,{item:!0,xs:12,children:(0,w.jsx)(m.z21,{})}),f&&(0,w.jsxs)(s.Fragment,{children:[(0,w.jsx)(m.xA9,{item:!0,xs:12,children:(0,w.jsx)(I,{bucketName:n,internalPaths:t,hidePathButton:!0})}),(0,w.jsx)(m.xA9,{item:!0,xs:12,sx:{position:"relative","& .detailsSpacer":{marginRight:18,"@media (max-width: 600px)":{marginRight:0}},["@media (max-width: ".concat(m.nmC.md,"px)")]:{"&::before":{display:"none"}}},children:(0,w.jsx)(m.lcx,{icon:(0,w.jsx)("span",{style:{display:"block",marginTop:"-10px"},children:(0,w.jsx)(m.j1U,{style:{width:20,height:20}})}),title:"".concat($.length>0?$[$.length-1]:f.name," Versions"),subTitle:(0,w.jsxs)(s.Fragment,{children:[(0,w.jsx)("span",{className:"detailsSpacer",children:(0,w.jsxs)("strong",{children:[y.length,T?"+":""," Version",1===y.length?"":"s","\xa0\xa0\xa0"]})}),(0,w.jsx)("span",{className:"detailsSpacer",children:(0,w.jsxs)("strong",{children:[(0,g.qO)(oe),T?"+":""]})})]}),actions:(0,w.jsxs)(s.Fragment,{children:[(0,w.jsx)(D.A,{tooltip:"Select Multiple Versions",children:(0,w.jsx)(m.$nd,{id:"select-multiple-versions",onClick:()=>{J(!M)},icon:(0,w.jsx)(m.IN,{}),variant:M?"callAction":"regular",style:{marginRight:8}})}),M&&(0,w.jsx)(D.A,{tooltip:"Delete Selected Versions",children:(0,w.jsx)(m.$nd,{id:"delete-multiple-versions",onClick:()=>{Z(!0)},icon:(0,w.jsx)(m.d7y,{}),variant:"secondary",style:{marginRight:8},disabled:0===K.length})}),(0,w.jsx)(D.A,{tooltip:"Delete Non Current Versions",children:(0,w.jsx)(m.$nd,{id:"delete-non-current",onClick:()=>{U(!0)},icon:(0,w.jsx)(m.rgY,{}),variant:"secondary",style:{marginRight:15},disabled:y.length<=1})}),(0,w.jsx)(m.l6P,{id:"sort-by",options:[{label:"Date",value:"date"},{label:"Size",value:"size"}],value:F,label:"Sort by",onChange:e=>{V(e)},noLabelMinWidth:!0})]}),bottomBorder:!1})}),(0,w.jsx)(m.xA9,{item:!0,xs:12,sx:{flexGrow:1,height:"calc(100% - 120px)",overflow:"auto",["@media (max-width: ".concat(m.nmC.md,"px)")]:{height:600}},children:f.version_id&&"null"!==f.version_id&&(0,w.jsx)(le.B8,{style:{width:"100%"},containerStyle:{width:"100%",maxWidth:"100%"},width:1,height:800,rowCount:se.length,rowHeight:108,rowRenderer:e=>{let{key:t,index:n,isScrolling:s,isVisible:o,style:i}=e;const a=y.length-n;return(0,w.jsx)(ie,{style:i,fileName:(null===f||void 0===f?void 0:f.name)||"",versionInfo:se[n],index:a,onDownload:ee,onRestore:X,onShare:q,onPreview:Q,globalClick:te,isSelected:h===se[n].version_id,checkable:M,onCheck:de,isChecked:K.includes(se[n].version_id||"")},t)}})})]})]})]})},he=e=>{if(e.name.endsWith("/"))return"";const t=j.c9.now(),n=j.c9.fromISO(e.last_modified);return t.hasSame(n,"day")&&t.hasSame(n,"month")&&t.hasSame(n,"year")?"Today, ".concat(n.toFormat("HH:mm")):n.toFormat("ccc, LLL dd yyyy HH:mm (ZZZZ)")},ue=e=>e.name.endsWith("/")||!e.size?"-":(0,g.nO)(String(e.size)),me=[{label:"Name",elementKey:"name",renderFunction:M,enableSort:!0},{label:"Last Modified",elementKey:"last_modified",renderFunction:he,renderFullObject:!0,enableSort:!0},{label:"Size",elementKey:"size",renderFunction:ue,renderFullObject:!0,width:100,enableSort:!0}],xe=[{label:"Name",elementKey:"name",renderFunction:M,enableSort:!0},{label:"Object Date",elementKey:"last_modified",renderFunction:he,renderFullObject:!0,enableSort:!0},{label:"Size",elementKey:"size",renderFunction:ue,renderFullObject:!0,width:100,enableSort:!0},{label:"Deleted",elementKey:"delete_flag",renderFunction:e=>e?"Yes":"No",width:60}];var pe=n(6537);const je=()=>{const e=(0,r.j)(),t=(0,i.g)(),n=(0,i.Zp)(),[a,d]=(0,s.useState)("ASC"),[h,x]=(0,s.useState)("name"),p=t.bucketName||"",j=(0,o.d4)((e=>e.objectBrowser.objectDetailsOpen)),g=(0,o.d4)((e=>e.objectBrowser.requestInProgress)),b=(0,o.d4)(pe.s$),f=!(null===b||void 0===b||!b.includes("object-browser-only")),v=(0,o.d4)((e=>e.objectBrowser.rewind.rewindEnabled)),S=(0,o.d4)((e=>e.objectBrowser.records)),y=(0,o.d4)((e=>e.objectBrowser.searchObjects)),O=(0,o.d4)((e=>e.objectBrowser.selectedObjects)),C=(0,o.d4)((e=>e.objectBrowser.connectionError)),T=(0,o.d4)((e=>e.system.anonymousMode)),E=(0,_._)(p,[l.OV.S3_LIST_BUCKET,l.OV.S3_ALL_LIST_BUCKET]),A=S.filter((e=>{if(""===y)return!0;return e.name.toLowerCase().indexOf(y.toLowerCase())>=0})).sort((0,k.$w)(h));let I=[];I="ASC"===a?A:A.reverse();const N=[{type:"view",tooltip:"View",onClick:t=>{var s;const o=t.name||"",i="/browser/".concat(encodeURIComponent(p)).concat(o?"/".concat(encodeURIComponent(o)):"");!T||null!==(s=t.name)&&void 0!==s&&s.endsWith("/")?(e((0,c.KX)([])),n(i),T||(e((0,c.TO)(!0)),e((0,c.SK)(!0))),e((0,c.A7)(o))):(0,R._)(e,p,o,t)},sendOnlyId:!1}];let B=E||T?"This location is empty".concat(v?"":", please try uploading a new file"):(0,l.vj)([l.OV.S3_LIST_BUCKET,l.OV.S3_ALL_LIST_BUCKET],"view Objects in this bucket");C&&(B="Objects List unavailable. Please review your WebSockets configuration and try again");let F="calc(100vh - 290px)";return f&&(F="calc(100vh - 315px)"),(0,w.jsx)(m.bQt,{itemActions:N,columns:v?xe:me,isLoading:g,entityName:"Objects",idField:"name",records:I,customPaperHeight:F,selectedItems:O,onSelect:T?void 0:t=>{const n=t.target,s=n.value,o=n.checked;let i=[...O];return o?i.push(s):i=i.filter((e=>e!==s)),e((0,c.KX)(i)),e((0,c.A7)(null)),i},customEmptyMessage:B,sortEnabled:{currentSort:h,currentDirection:a,onSortClick:t=>{const n=u()(t,"sortDirection","DESC");x(t.sortBy),d(n),e((0,c.Yw)(!0))}},onSelectAll:()=>{if(e((0,c.A7)(null)),O.length===I.length)return void e((0,c.KX)([]));const t=I.map((e=>e.name));e((0,c.KX)(t))},rowStyle:e=>{var t;let{index:n}=e;return null!==(t=I[n])&&void 0!==t&&t.delete_flag?"deleted":""},sx:{minHeight:j?"100%":"initial"},noBackground:!0})},ge=e=>{let{placeholder:t="",onChange:n,overrideClass:s,value:o,id:i="search-resource",label:a="",sx:r}=e;return(0,w.jsx)(m.cl_,{placeholder:t,className:s||"",id:i,label:a,onChange:e=>{n(e.target.value)},value:o,startIcon:(0,w.jsx)(m.WIv,{}),sx:r})},be=()=>{const e=(0,r.j)(),t=(0,o.d4)((e=>e.objectBrowser.searchObjects));return(0,w.jsx)(ge,{placeholder:"Start typing to filter objects in the bucket",onChange:t=>{e((0,c.$X)(t))},value:t})},fe=y(s.lazy((()=>n.e(941).then(n.bind(n,5941))))),ve=y(s.lazy((()=>Promise.resolve().then(n.bind(n,718))))),Se=y(s.lazy((()=>n.e(704).then(n.bind(n,2704))))),_e=y(s.lazy((()=>Promise.resolve().then(n.bind(n,7524))))),we={borderWidth:2,borderRadius:2,borderColor:"transparent",outline:"none"},ye={borderStyle:"dashed",backgroundColor:"transparent",borderColor:"#2196f3"},Oe={borderStyle:"dashed",backgroundColor:"transparent",borderColor:"#00e676"},Ce=()=>{var e;const t=(0,r.j)(),n=(0,i.g)(),h=(0,i.Zp)(),b=(0,i.zy)(),f=(0,o.d4)((e=>e.objectBrowser.rewind.rewindEnabled)),v=(0,o.d4)((e=>e.objectBrowser.rewind.bucketToRewind)),S=(0,o.d4)((e=>e.objectBrowser.versionsMode)),y=(0,o.d4)((e=>e.objectBrowser.showDeleted)),E=(0,o.d4)((e=>e.objectBrowser.objectDetailsOpen)),A=(0,o.d4)((e=>e.objectBrowser.selectedInternalPaths)),R=(0,o.d4)((e=>e.objectBrowser.requestInProgress)),z=(0,o.d4)((e=>e.objectBrowser.simplePath)),U=(0,o.d4)((e=>e.objectBrowser.versionInfo)),M=(0,o.d4)((e=>e.objectBrowser.downloadRenameModal)),G=(0,o.d4)((e=>e.objectBrowser.selectedPreview)),J=(0,o.d4)((e=>e.objectBrowser.shareFileModalOpen)),W=(0,o.d4)((e=>e.objectBrowser.previewOpen)),K=(0,o.d4)((e=>e.system.anonymousMode)),H=(0,o.d4)((e=>{var t;return(null===(t=e.objectBrowser)||void 0===t?void 0:t.records)||[]})),Y=(0,o.d4)(F.Nx),Z=(0,o.d4)(F.fT),[$,q]=(0,s.useState)(!1),[Q,ee]=(0,s.useState)(!1),[ne,se]=(0,s.useState)(!1),[oe,ie]=(0,s.useState)(!1),[ae,re]=(0,s.useState)(!1),[le,ce]=(0,s.useState)(null),[he,ue]=(0,s.useState)(null),[me,xe]=(0,s.useState)(!1),pe=N(U.status),ge=n.bucketName||"",Ce=b.pathname.split("/browser/".concat(ge,"/")),Te=2===Ce.length?decodeURIComponent(Ce[1]):"",Ee=Te.split("/").filter((e=>""!==e));let Ae=[ge];Ee.length>0&&(Ae=Ae.concat(Ee));const Ie=(0,s.useRef)(null),ke=(0,s.useRef)(null),Ne=(0,o.d4)((e=>e.console.session&&e.console.session.permissions||{})),Be=[l.OV.S3_PUT_OBJECT,l.OV.S3_PUT_ACTIONS],Fe=Ae.join("/"),Ve=function(e,t){const n=T(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[]).reduce(((e,t)=>{const n=C(t);return n&&e.push(".".concat(n)),e}),[]);return[...new Set(n)].join(",")}(Ne,Fe,Be),De=T(Ne,Fe,Be),Le=(0,_._)([Fe,...De],[l.OV.S3_GET_OBJECT,l.OV.S3_GET_ACTIONS]),Pe=(0,_._)(ge,[l.OV.S3_GET_OBJECT,l.OV.S3_GET_ACTIONS,l.OV.S3_GET_BUCKET_VERSIONING]),Re=(0,_._)([Fe,...De],[l.OV.S3_DELETE_OBJECT,l.OV.S3_DELETE_ACTIONS]),ze=(0,_._)([Fe,...De],Be)||K,Ue=(0,_._)(ge,[l.OV.S3_GET_BUCKET_POLICY,l.OV.S3_PUT_BUCKET_POLICY,l.OV.S3_GET_ACTIONS,l.OV.S3_PUT_ACTIONS]),Me=(0,o.d4)((e=>e.objectBrowser.selectedObjects)),Ge=(()=>{let e=!1;if(1===Me.length){e=!!H.find((e=>e.name==="".concat(Me[0])&&e.delete_flag))}return e})(),Je=(0,s.useCallback)((()=>{const e=Me[0];!me&&e&&a.F.buckets.getObjectMetadata(ge,{prefix:e}).then((e=>{let t=u()(e.data,"objectMetadata",{});xe(!0),ue(t)})).catch((e=>{console.error("Error Getting Metadata Status: ",e,null===e||void 0===e?void 0:e.detailedError),xe(!0)}))}),[ge,Me,me]);(0,s.useEffect)((()=>{ge&&!Ge&&Je()}),[ge,Me,Je,Ge]),(0,s.useEffect)((()=>{f&&v!==ge&&t((0,c.rS)())}),[f,v,ge,t]),(0,s.useEffect)((()=>{null!==ke.current&&(ke.current.setAttribute("directory",""),ke.current.setAttribute("webkitdirectory",""))}),[ke]),(0,s.useEffect)((()=>{if(1===Me.length){const e=Me[0],t=e.endsWith("/");let n=(0,k.IZ)(he,e);re(!("none"===n||!Le)),ie(!(!Le||t))}else ie(!1),re(!1)}),[Me,Le,he]),(0,s.useEffect)((()=>{le||K||a.F.buckets.getBucketQuota(ge).then((e=>{let t=null;e.data.quota&&(t=e.data),ce(t)})).catch((e=>{console.error("Error Getting Quota Status: ",e.error.detailedMessage),ce(null)}))}),[le,ge,K]),(0,s.useEffect)((()=>{Me.length>0?t((0,c.TO)(!0)):0!==Me.length||null!==A||R||t((0,c.TO)(!1))}),[Me,A,t,R]),(0,s.useEffect)((()=>{ne||(t((0,F.ZU)(!0)),se(!0))}),[ne,t,se]),(0,s.useEffect)((()=>{!R&&!Y||K||a.F.buckets.bucketInfo(ge).then((e=>{t((0,F.ZU)(!1)),t((0,F.$T)(e.data))})).catch((e=>{t((0,F.ZU)(!1)),t((0,O.C9)((0,x.S)(e)))}))}),[ge,Y,t,K,R]);const We=e=>{if(null!==e&&void 0!==e&&null!==e.target.files&&void 0!==e.target.files){e.preventDefault();var t=[];for(let n=0;n<e.target.files.length;n++)t.push(e.target.files[n]);Ke(t,""),e.target.value=""}},Ke=(0,s.useCallback)(((e,n)=>{let s="";z&&(s=z.endsWith("/")?z:z+"/");((e,n,s,o)=>{let i=i=>new Promise(((a,r)=>{let l="api/v1/buckets/".concat(n,"/objects/upload");const d=i.name,h=new Blob([i],{type:i.type}),m=(e=>e.replace(/(^|\/)\.\//g,"/"))(u()(i,"path","")),x=u()(i,"webkitRelativePath","");let p=o;const j=(0,B.E0)(8);""!==m?p=m:""!==x&&(p=x);let g="";if(""!==s||""!==p){const e=p.split("/").slice(0,-1).join("/"),t=s.endsWith("/")?s.slice(0,-1):s;g="".concat(t).concat(t.endsWith("/")||""===e||e.startsWith("/")?"":"/").concat(e).concat(!e.endsWith("/")||""===e.trim()&&!s.endsWith("/")?"/":"")}l=""!==g?"".concat(l,"?prefix=").concat(encodeURIComponent(g+d)):"".concat(l,"?prefix=").concat(encodeURIComponent(d));const b=encodeURIComponent("".concat(n,"-").concat(g,"-").concat((new Date).getTime(),"-").concat(Math.random()));let f=new XMLHttpRequest;f.open("POST",l,!0),K&&f.setRequestHeader("X-Anonymous","1");const v=e.length>1;let S="An error occurred while uploading the file".concat(v?"s":"",".");const _={413:"Error - File size too large"};f.withCredentials=!1,f.onload=function(){if(f.status>=200&&f.status<300)t((0,c.rx)(b)),a({status:f.status}),(0,B.vy)(j);else{if(_[f.status])S=_[f.status];else if(f.response)try{const e=JSON.parse(f.response);S=e.detailedMessage}catch(e){S="something went wrong"}t((0,c.iL)({instanceID:b,msg:S})),r({status:f.status,message:S}),(0,B.vy)(j)}},f.upload.addEventListener("error",(()=>{r(S),t((0,c.iL)({instanceID:b,msg:"A network error occurred."}))})),f.upload.addEventListener("progress",(e=>{const n=Math.floor(100*e.loaded/e.total);t((0,c.DW)({instanceID:b,progress:n}))})),f.onerror=()=>{r(S),t((0,c.iL)({instanceID:b,msg:"A network error occurred."}))},f.onloadend=()=>{0===e.length&&t((0,c.Yw)(!0))},f.onabort=()=>{t((0,c.Dm)(b))};const w=new FormData;void 0!==i.size&&(w.append(i.size.toString(),h,d),(0,B.FP)(j,f),t((0,c.cP)({ID:j,bucketName:n,done:!1,instanceID:b,percentage:0,prefix:"".concat(g).concat(d),type:"upload",waitingForFile:!1,failed:!1,cancelled:!1,errorMessage:""})),(0,B.vx)(j,w))}));const a=[];t((0,c.Nu)());for(let t=0;t<e.length;t++){const n=e[t];a.push(i(n))}Promise.allSettled(a).then((e=>{const n=e.filter((e=>"rejected"===e.status));if(n.length>0){const e=a.length,s=a.length-n.length,o={errorMessage:"There were some errors during file upload",detailedError:"Uploaded files ".concat(s,"/").concat(e)};t((0,O.C9)(o))}t((0,c.Yw)(!0))}))})(e,ge,s,n)}),[ge,t,z,K]),He=(0,s.useCallback)((e=>{if(e&&e.length>0&&ze){let n=e[0].path,s=e;Ve.length>0&&(s=e.filter((e=>{const t=C(e.name);return Ve.includes(t)}))),s.length?(Ke(s,n),console.log("".concat(s.length," Allowed Files Processed out of ").concat(e.length,"."),Fe,...De),s.length!==e.length&&t((0,O.C9)({errorMessage:"Upload is restricted.",detailedError:(0,l.vj)([l.OV.S3_PUT_OBJECT,l.OV.S3_PUT_ACTIONS],"upload objects to this location")}))):(t((0,O.C9)({errorMessage:"Could not process drag and drop.",detailedError:(0,l.vj)([l.OV.S3_PUT_OBJECT,l.OV.S3_PUT_ACTIONS],"upload objects to this location")})),console.error("Could not process drag and drop . upload may be restricted.",Fe,...De))}ze||t((0,O.C9)({errorMessage:"Upload not allowed",detailedError:(0,l.vj)([l.OV.S3_PUT_OBJECT,l.OV.S3_PUT_ACTIONS],"upload objects to this location")}))}),[Ke]),{getRootProps:Ye,getInputProps:Ze,isDragActive:$e,isDragAccept:qe}=(0,p.VB)({noClick:!0,onDrop:He}),Qe=(0,s.useMemo)((()=>(0,d.A)((0,d.A)((0,d.A)({},we),$e?ye:{}),qe?Oe:{})),[$e,qe]),Xe=e=>{if(t((0,c.A7)(null)),t((0,c.cQ)({status:!1})),E&&null!==A){const e=Te.split("/");e.pop();let t="";e&&e.length>0&&(t="".concat(e.join("/"),"/")),h("/browser/".concat(encodeURIComponent(ge),"/").concat(encodeURIComponent(t)))}t((0,c.TO)(!1)),e&&t((0,c.Yw)(!0))};let et=j.c9.now();null!==Z&&void 0!==Z&&Z.creation_date&&(et=j.c9.fromISO(Z.creation_date));const tt=(null===Me||void 0===Me?void 0:Me.length)<=1?"Download Selected":" Download selected objects as Zip. Any Deleted objects in the selection would be skipped from download.",nt=[{action:()=>{t((0,V.op)(ge))},label:"Download",disabled:!Le||Ge,icon:(0,w.jsx)(m.s3U,{}),tooltip:Le?tt:(0,l.vj)([l.OV.S3_GET_OBJECT,l.OV.S3_GET_ACTIONS],"download objects from this bucket")},{action:()=>{t((0,V.mS)())},label:"Share",disabled:1!==Me.length||!oe||Ge,icon:(0,w.jsx)(m.liv,{}),tooltip:oe?"Share Selected File":"Sharing unavailable"},{action:()=>{t((0,V.HS)())},label:"Preview",disabled:1!==Me.length||!ae||Ge,icon:(0,w.jsx)(m.cyn,{}),tooltip:ae?"Preview Selected File":"Preview unavailable"},{action:()=>{t((0,V.oz)())},label:"Anonymous Access",disabled:1!==Me.length||!Me[0].endsWith("/")||!Ue,icon:(0,w.jsx)(m._kf,{}),tooltip:1===Me.length&&Me[0].endsWith("/")?"Set Anonymous Access to this Folder":"Anonymous Access unavailable"},{action:()=>{q(!0)},label:"Delete",icon:(0,w.jsx)(m.d7y,{}),disabled:!Re||0===Me.length,tooltip:Re?"Delete Selected Files":(0,l.vj)([l.OV.S3_DELETE_OBJECT,l.OV.S3_DELETE_ACTIONS],"delete objects in this bucket")}];return(0,w.jsxs)(s.Fragment,{children:[J&&G&&(0,w.jsx)(ve,{open:J,closeModalAndRefresh:()=>{t((0,c.Lf)(!1)),t((0,c.go)(null))},bucketName:ge,dataObject:{name:G.name,last_modified:"",version_id:G.version_id}}),$&&(0,w.jsx)(fe,{deleteOpen:$,selectedBucket:ge,selectedObjects:Me,closeDeleteModalAndRefresh:e=>{q(!1),e&&(t((0,O.Hk)("Objects deleted successfully.")),t((0,c.KX)([])),t((0,c.Yw)(!0)))},versioning:U}),Q&&(0,w.jsx)(Se,{open:Q,closeModalAndRefresh:()=>{ee(!1)},bucketName:ge}),W&&G&&(0,w.jsx)(_e,{open:W,bucketName:ge,actualInfo:{name:G.name||"",last_modified:"",version_id:G.version_id||"",size:G.size||0},onClosePreview:()=>{t((0,c.xE)(!1)),t((0,c.go)(null))}}),!!M&&(0,w.jsx)(X,{open:!!M,closeModal:()=>{t((0,c.Ew)(null))},currentItem:(null===(e=M.name.split("/"))||void 0===e?void 0:e.pop())||"",bucketName:ge,internalPaths:Te,actualInfo:{name:M.name,last_modified:"",version_id:M.version_id,size:M.size}}),(0,w.jsxs)(m.Mxu,{variant:"full",children:[K&&(0,w.jsx)("div",{style:{paddingBottom:16},children:(0,w.jsx)(be,{})}),(0,w.jsx)(m.azJ,{withBorders:!0,sx:{padding:"0 5px"},children:(0,w.jsx)(m.lcx,{icon:(0,w.jsx)("span",{children:(0,w.jsx)(m.brV,{style:{width:30}})}),title:ge,subTitle:K?null:(0,w.jsxs)(m.azJ,{sx:{"& .detailsSpacer":{marginRight:18,"@media (max-width: 600px)":{marginRight:0}}},children:[(0,w.jsxs)("span",{className:"detailsSpacer",children:["Created on:\xa0",(0,w.jsx)("strong",{children:null!==Z&&void 0!==Z&&Z.creation_date?et.toFormat("ccc, LLL dd yyyy HH:mm:ss (ZZZZ)"):""})]}),(0,w.jsxs)("span",{className:"detailsSpacer",children:["Access:\xa0\xa0",(0,w.jsx)("strong",{children:(null===Z||void 0===Z?void 0:Z.access)||""})]}),Z&&(0,w.jsx)(s.Fragment,{children:(0,w.jsxs)("span",{className:"detailsSpacer",children:[Z.size&&(0,w.jsx)(s.Fragment,{children:(0,g.qO)(Z.size)}),Z.size&&le&&(0,w.jsxs)(s.Fragment,{children:[" ","/ ",(0,g.qO)(le.quota||0)]}),Z.size&&Z.objects?" - ":"",Z.objects&&(0,w.jsxs)(s.Fragment,{children:[Z.objects,"\xa0Object",Z.objects&&1!==Z.objects?"s":""]})]})})]}),actions:(0,w.jsxs)(s.Fragment,{children:[!K&&(0,w.jsx)(D.A,{tooltip:Pe?"Rewind Bucket":(0,l.vj)([l.OV.S3_GET_OBJECT,l.OV.S3_GET_ACTIONS,l.OV.S3_GET_BUCKET_VERSIONING],"apply rewind in this bucket"),children:(0,w.jsx)(m.$nd,{id:"rewind-objects-list",label:"Rewind",icon:(0,w.jsx)(m.Exy,{color:"alert",dotOnly:!0,invisible:!f,children:(0,w.jsx)(m.osr,{style:{minWidth:16,minHeight:16,width:16,height:16,marginTop:-3}})}),variant:"regular",onClick:()=>{ee(!0)},disabled:!pe||!Pe})}),(0,w.jsx)(D.A,{tooltip:"Reload List",children:(0,w.jsx)(m.$nd,{id:"refresh-objects-list",label:"Refresh",icon:(0,w.jsx)(m.fNY,{}),variant:"regular",onClick:()=>{S?t((0,c.SK)(!0)):(t((0,c.A3)()),t((0,c.Yw)(!0)))},disabled:!K&&(!(0,_._)(ge,[l.OV.S3_LIST_BUCKET,l.OV.S3_ALL_LIST_BUCKET])||f)})}),(0,w.jsx)("input",{type:"file",multiple:!0,accept:Ve||void 0,onChange:We,style:{display:"none"},ref:Ie}),(0,w.jsx)("input",{type:"file",multiple:!0,onChange:We,style:{display:"none"},ref:ke}),(0,w.jsx)(L,{bucketName:ge,uploadPath:Fe,uploadFileFunction:e=>{Ie&&Ie.current&&Ie.current.click(),e()},uploadFolderFunction:e=>{ke&&ke.current&&ke.current.click(),e()}})]}),bottomBorder:!1})}),(0,w.jsxs)("div",(0,d.A)((0,d.A)({id:"object-list-wrapper"},Ye({style:(0,d.A)({},Qe)})),{},{children:[(0,w.jsx)("input",(0,d.A)({},Ze())),(0,w.jsxs)(m.azJ,{withBorders:!0,sx:{display:"flex",borderTop:0,padding:0,"& .hideListOnSmall":{"@media (max-width: 799px)":{display:"none"}}},children:[S?(0,w.jsx)(s.Fragment,{children:null!==A&&(0,w.jsx)(de,{internalPaths:A,bucketName:ge})}):(0,w.jsx)(_.R,{scopes:[l.OV.S3_LIST_BUCKET,l.OV.S3_ALL_LIST_BUCKET],resource:ge,errorProps:{disabled:!0},children:(0,w.jsxs)(m.xA9,{item:!0,xs:12,sx:{width:"100%",position:"relative","&.detailsOpen":{"@media (max-width: 799px)":{display:"none"}}},className:E?"detailsOpen":"",children:[!K&&(0,w.jsx)(m.xA9,{item:!0,xs:12,sx:{padding:"12px 14px 5px"},children:(0,w.jsx)(I,{bucketName:ge,internalPaths:Te,additionalOptions:!pe||f?null:(0,w.jsx)(m.Sc0,{name:"deleted_objects",id:"showDeletedObjects",value:"deleted_on",label:"Show deleted objects",onChange:()=>{t((0,c.A3)()),t((0,c.lA)(!y)),Xe(!0)},checked:y,sx:{marginLeft:5,"@media (max-width: 600px)":{marginLeft:0,flexDirection:"row"}}}),hidePathButton:!1})}),(0,w.jsx)(je,{})]})}),!K&&(0,w.jsx)(_.R,{scopes:[l.OV.S3_LIST_BUCKET,l.OV.S3_ALL_LIST_BUCKET],resource:ge,errorProps:{disabled:!0},children:(0,w.jsxs)(P,{open:E,closePanel:()=>{Xe(!1)},className:"".concat(S?"hideListOnSmall":""),children:[Me.length>0&&(0,w.jsx)(m.Smc,{items:nt,title:"Selected Objects:"}),null!==A&&(0,w.jsx)(te,{internalPaths:A,bucketName:ge,onClosePanel:Xe,versioningInfo:U})]})})]})]}))]})]})};var Te=n(8218);const Ee=e=>{let{marginRight:t,marginTop:s}=e,i=n(3498);const a=(0,o.d4)((e=>e.system.overrideStyles)),r=i((null===a||void 0===a?void 0:a.backgroundColor)||"#fff").getBrightness()<=128;return(0,w.jsx)(m.xA9,{sx:{"& svg":{width:105,marginRight:t,marginTop:s,fill:r?"#fff":"#081C42"}},children:(0,w.jsx)(m.xul,{})})};var Ae=n(8793),Ie=n(9707),ke=n(8617);const Ne=e=>{let{bucketName:t}=e;const n=(0,r.j)(),i=(0,o.d4)(pe.s$),a=(0,o.d4)((e=>e.objectBrowser.versionsMode)),d=(0,o.d4)((e=>e.objectBrowser.versionedFile)),h=(0,o.d4)((e=>e.objectBrowser.searchVersions)),u=!(null===i||void 0===i||!i.includes("object-browser-only")),x=(0,w.jsx)(s.Fragment,{children:a?(0,w.jsx)(s.Fragment,{children:(0,w.jsx)(ge,{placeholder:"Start typing to filter versions of ".concat(d),onChange:e=>{n((0,c.aj)(e))},value:h})}):(0,w.jsx)(_.R,{scopes:[l.OV.S3_LIST_BUCKET,l.OV.S3_ALL_LIST_BUCKET],resource:t,errorProps:{disabled:!0},children:(0,w.jsx)(be,{})})});return(0,s.useEffect)((()=>{n((0,O.ph)("object_browser"))}),[]),(0,w.jsx)(s.Fragment,{children:u?(0,w.jsxs)(m.xA9,{container:!0,sx:{padding:"20px 32px 0"},children:[(0,w.jsx)(m.xA9,{children:(0,w.jsx)(Ee,{marginRight:30,marginTop:10})}),(0,w.jsxs)(m.xA9,{item:!0,xs:!0,sx:{display:"flex",gap:10},children:[x,(0,w.jsx)(Ie.A,{})]})]}):(0,w.jsx)(Ae.A,{label:"Object Browser",actions:(0,w.jsx)(s.Fragment,{children:(0,w.jsx)(ke.A,{})}),middleComponent:x})})},Be=()=>{const e=(0,r.j)(),t=(0,i.g)(),n=(0,i.zy)(),d=(0,o.d4)((e=>e.objectBrowser.loadingVersioning)),h=(0,o.d4)((e=>e.objectBrowser.rewind.rewindEnabled)),u=(0,o.d4)((e=>e.objectBrowser.rewind.dateToRewind)),m=(0,o.d4)((e=>e.objectBrowser.showDeleted)),x=(0,o.d4)((e=>e.objectBrowser.requestInProgress)),p=(0,o.d4)((e=>e.objectBrowser.reloadObjectsList)),j=(0,o.d4)((e=>e.objectBrowser.simplePath)),g=(0,o.d4)((e=>e.system.anonymousMode)),b=(0,o.d4)((e=>e.objectBrowser.selectedBucket)),f=(0,o.d4)((e=>e.objectBrowser.records)),v=t.bucketName||"",S=n.pathname.split("/browser/".concat(encodeURIComponent(v),"/")),_=2===S.length?decodeURIComponent(S[1]):"",y=(0,s.useCallback)((t=>{let n=(new Date).toISOString();null!==u&&h&&(n=u);e({type:"socket/OBRequest",payload:{bucketName:v,path:t,rewindMode:h||m,date:n}})}),[v,m,u,h,e]),O=(0,s.useCallback)((function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e((0,c.cQ)({status:!1}));let n=_;_.endsWith("/")||""===_||(n="".concat(_.split("/").slice(0,-1).join("/"),"/")),"/"===n&&(n=""),(n!==j||v!==b||t)&&(e((0,c.u)(!0)),y(n))}),[_,e,j,b,v,y]);(0,s.useEffect)((()=>()=>{e({type:"socket/OBCancelLast"})}),[e]),(0,s.useEffect)((()=>{e((0,c.vn)(!0)),_.endsWith("/")||""===_?(e((0,c.TO)(!1)),e((0,c.A7)(null)),e((0,c.Qy)(!0))):(e((0,c.oe)(!0)),e((0,c.TO)(!0)),e((0,c.SK)(!0)),e((0,c.A7)(_||"")))}),[v,_,u,h,e]),(0,s.useEffect)((()=>{O(!1)}),[O]),(0,s.useEffect)((()=>{p&&0===f.length&&!x&&O(!0)}),[p,f,x,O]);const C=(0,Te.A)(v,[l.OV.S3_LIST_BUCKET,l.OV.S3_ALL_LIST_BUCKET])||g;return(0,s.useEffect)((()=>{d&&!g&&(C?a.F.buckets.getBucketVersioning(v).then((t=>{e((0,c.AP)(t.data)),e((0,c.vn)(!1))})).catch((t=>{console.error("Error Getting Object Versioning Status: ",t.error.detailedMessage),e((0,c.vn)(!1))})):(e((0,c.vn)(!1)),e((0,c.A3)())))}),[v,d,e,C,g]),(0,w.jsxs)(s.Fragment,{children:[!g&&(0,w.jsx)(Ne,{bucketName:v}),(0,w.jsx)(Ce,{})]})}},718:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>S});var s=n(5043),o=n(2166),i=n(4986),a=n(1476),r=n.n(a),l=n(4141),c=n(28),d=n(579);const h=e=>{let{id:t,label:n,maxSeconds:o,entity:a,onChange:r}=e;const l=Math.floor(o/86400),h=Math.floor(o%86400/3600),u=Math.floor(o%3600/60),[m,x]=(0,s.useState)(0),[p,j]=(0,s.useState)(0),[g,b]=(0,s.useState)(0),[f,v]=(0,s.useState)(!0),[S,_]=(0,s.useState)(null);(0,s.useEffect)((()=>{x(l),j(h),b(u)}),[l,h,u]),(0,s.useEffect)((()=>{var e,t,n;isNaN(p)||isNaN(m)||isNaN(g)||_((e=m,t=p,n=g,c.c9.now().plus({hours:t+24*e,minutes:n}).toISO()))}),[m,p,g]),(0,s.useEffect)((()=>{if(f&&S){const e=c.c9.fromISO(S).toFormat("yyyy-MM-dd HH:mm:ss");r(e.split(" ").join("T"),!0)}else r("0000-00-00",!1)}),[S,r,f]),(0,s.useEffect)((()=>{let e=!0;(m<0||m>7||m>l||isNaN(m))&&(e=!1),(p<0||p>23||isNaN(p))&&(e=!1),(g<0||g>59||isNaN(g))&&(e=!1),m===l&&(p>h&&(e=!1),p===h&&g>u&&(e=!1)),m<=0&&p<=0&&g<=0&&(e=!1),v(e)}),[S,l,h,u,r,m,p,g]);const w={"& .textBoxContainer":{minWidth:0},"& input":{textAlign:"center",paddingRight:10,paddingLeft:10,width:40}};return(0,d.jsxs)(i.azJ,{className:"inputItem",children:[(0,d.jsx)(i.azJ,{sx:{display:"flex",alignItems:"center",marginBottom:5},children:(0,d.jsx)(i.l1Y,{htmlFor:t,children:n})}),(0,d.jsxs)(i.azJ,{sx:{display:"flex",alignItems:"flex-start",justifyContent:"space-evenly",gap:10,"& .reverseInput":{flexFlow:"row-reverse","& > label":{fontWeight:400,marginLeft:15,marginRight:25}}},children:[(0,d.jsx)(i.azJ,{children:(0,d.jsx)(i.cl_,{id:t,className:"reverseInput removeArrows",type:"number",min:"0",max:"7",label:"Days",name:t,onChange:e=>{x(parseInt(e.target.value))},value:m.toString(),sx:w,noLabelMinWidth:!0})}),(0,d.jsx)(i.azJ,{children:(0,d.jsx)(i.cl_,{id:t,className:"reverseInput removeArrows",type:"number",min:"0",max:"23",label:"Hours",name:t,onChange:e=>{j(parseInt(e.target.value))},value:p.toString(),sx:w,noLabelMinWidth:!0})}),(0,d.jsx)(i.azJ,{children:(0,d.jsx)(i.cl_,{id:t,className:"reverseInput removeArrows",type:"number",min:"0",max:"59",label:"Minutes",name:t,onChange:e=>{b(parseInt(e.target.value))},value:g.toString(),sx:w,noLabelMinWidth:!0})})]}),(0,d.jsx)(i.azJ,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-start",marginTop:25,marginLeft:10,marginBottom:15,"& .validityText":{fontSize:14,marginTop:15,display:"flex",alignItems:"center",justifyContent:"center","@media (max-width: 900px)":{flexFlow:"column"},"& > .min-icon":{color:"#5E5E5E",width:15,height:15,marginRight:10}},"& .validTill":{fontWeight:"bold",marginLeft:15},"& .invalidDurationText":{marginTop:15,display:"flex",color:"red",fontSize:11}},children:f&&S?(0,d.jsxs)("div",{className:"validityText",children:[(0,d.jsx)(i.qYV,{}),(0,d.jsxs)("div",{children:[a," will be available until:"]})," ",(0,d.jsx)("div",{className:"validTill",children:c.c9.fromISO(S).toFormat("MM/dd/yyyy HH:mm:ss ZZZZ")})]}):(0,d.jsx)("div",{className:"invalidDurationText",children:"Please select a valid duration."})})]})};var u=n(6483),m=n(4159),x=n(3635),p=n(6629),j=n(3518),g=n(1708),b=n(6035),f=n(3950),v=n.n(f);const S=e=>{let{open:t,closeModalAndRefresh:n,bucketName:a,dataObject:c}=e;const f=(0,x.j)(),S=(0,o.d4)(m.Rq),_=(0,o.d4)(b.yL),[w,y]=(0,s.useState)(""),[O,C]=(0,s.useState)(!0),[T,E]=(0,s.useState)(!1),[A,I]=(0,s.useState)(""),[k,N]=(0,s.useState)(!0),[B,F]=(0,s.useState)("null"),V=v()(((e,t)=>{N(t),t?I(e):(I(""),y(""))}),300);return(0,s.useEffect)((()=>{f((0,g.Ex)())}),[f]),(0,s.useEffect)((()=>{if(void 0===c.version_id)return S?(p.F.buckets.listObjects(a,{prefix:c.name||"",with_versions:S}).then((e=>{const t=(e.data.objects||[]).find((e=>e.is_latest));F(t?"".concat(t.version_id):"null")})).catch((e=>{f((0,m.Dy)((0,j.S)(e.error)))})),void C(!1)):(F("null"),void C(!1));F(c.version_id||"null"),C(!1)}),[a,c,S,f]),(0,s.useEffect)((()=>{if(k&&!O){E(!0),y("");const e=new Date("".concat(A)),t=new Date,n=Math.ceil((e.getTime()-t.getTime())/1e3);n>0&&p.F.buckets.shareObject(a,{prefix:c.name||"",version_id:B,expires:""!==A?"".concat(n,"s"):""}).then((e=>{y(e.data),E(!1)})).catch((e=>{f((0,m.Dy)((0,j.S)(e.error))),y(""),E(!1)}))}}),[c,A,a,k,y,f,S,O,B]),(0,d.jsx)(s.Fragment,{children:(0,d.jsxs)(l.A,{title:"Share File",titleIcon:(0,d.jsx)(i.liv,{style:{fill:"#4CCB92"}}),modalOpen:t,onClose:()=>{n()},children:[O&&(0,d.jsx)(i.xA9,{item:!0,xs:12,children:(0,d.jsx)(i.z21,{})}),!O&&(0,d.jsxs)(s.Fragment,{children:[(0,d.jsx)(i.xA9,{item:!0,xs:12,sx:{fontSize:14,fontWeight:400},children:(0,d.jsx)(i.m_M,{placement:"right",tooltip:(0,d.jsxs)("span",{children:["You can reset your session by logging out and logging back in to the web UI. ",(0,d.jsx)("br",{})," ",(0,d.jsx)("br",{}),"You can increase the maximum configuration time by setting the MINIO_STS_DURATION environment variable on all your nodes. ",(0,d.jsx)("br",{})," ",(0,d.jsx)("br",{}),"You can use ",(0,d.jsx)("b",{children:"mc share"})," as an alternative to this UI, where the session length does not limit the URL validity."]}),children:(0,d.jsxs)("span",{children:["The following URL lets you share this object without requiring a login. ",(0,d.jsx)("br",{}),"The URL expires automatically at the earlier of your configured time (",(0,u.K7)(_),") or the expiration of your current web session."]})})}),(0,d.jsx)("br",{}),(0,d.jsx)(i.xA9,{item:!0,xs:12,children:(0,d.jsx)(h,{id:"date",label:"Active for",maxSeconds:_,onChange:V,entity:"Link"})}),(0,d.jsx)(i.xA9,{item:!0,xs:12,sx:{marginBottom:10},children:(0,d.jsx)(i.EmB,{actionButton:(0,d.jsx)(r(),{text:w,children:(0,d.jsx)(i.$nd,{id:"copy-path",variant:"regular",onClick:()=>{f((0,m.h0)("Share URL Copied to clipboard"))},disabled:""===w||T,style:{width:"28px",height:"28px",padding:"0px"},icon:(0,d.jsx)(i.TdU,{})})}),children:w})})]})]})})}},7524:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>b});var s=n(5043),o=n(4141),i=n(4986),a=n(3097),r=n.n(a),l=n(3445),c=n(6629),d=n(7397),h=n(7806),u=n(6584),m=n(579);d.EA.workerSrc="./scripts/pdf.worker.min.mjs";const x=e=>{let{path:t,loading:n,onLoad:o,downloadFile:a}=e;const[r,l]=(0,s.useState)(!1),[c,d]=(0,s.useState)(0);if(!t)return null;const x=c>5?5:c,p=Array.from(Array(x).keys());return(0,m.jsxs)(s.Fragment,{children:[r&&0===c&&(0,m.jsx)(i.Wei,{variant:"error",title:"Error",message:(0,m.jsxs)(s.Fragment,{children:["File preview couldn't be displayed, Please try Download instead.",(0,m.jsx)(i.azJ,{sx:{display:"flex",justifyContent:"center",marginTop:12},children:(0,m.jsx)(i.$nd,{id:"download-preview",onClick:a,variant:"callAction",children:"Download File"})})]}),sx:{marginBottom:10}}),!n&&!r&&(0,m.jsx)(i.Wei,{variant:"warning",title:"File Preview",message:(0,m.jsxs)(s.Fragment,{children:["This is a File Preview for the first ",p.length," pages of the document, if you wish to work with the full document please download instead.",(0,m.jsx)(i.azJ,{sx:{display:"flex",justifyContent:"center",marginTop:12},children:(0,m.jsx)(i.$nd,{id:"download-preview",onClick:a,variant:"callAction",children:"Download File"})})]}),sx:{marginBottom:10}}),!r&&(0,m.jsx)(i.azJ,{sx:{overflowY:"auto","& .react-pdf__Page__canvas":{margin:"0 auto",backgroundColor:"transparent"}},children:(0,m.jsx)(h.A,{file:t,onLoadSuccess:e=>{let{_pdfInfo:t}=e;d(t.numPages||0),l(!1),o()},onLoadError:e=>{l(!0),o(),console.error(e)},children:p.map((e=>(0,m.jsx)(u.A,{pageNumber:e+1,renderAnnotationLayer:!1,renderTextLayer:!1,renderForms:!1},"render-page-".concat(e))))})})]})};var p=n(8245),j=n(3635);const g=e=>{let{bucketName:t,actualInfo:n,isFullscreen:o=!1}=e;const a=(0,j.j)(),[d,h]=(0,s.useState)(!0),[u,g]=(0,s.useState)(null),[b,f]=(0,s.useState)(!1),v=(null===n||void 0===n?void 0:n.name)||"",S=(0,s.useCallback)((()=>{b||c.F.buckets.getObjectMetadata(t,{prefix:v,versionID:n.version_id||""}).then((e=>{let t=r()(e.data,"objectMetadata",{});f(!0),g(t)})).catch((e=>{console.error("Error Getting Metadata Status: ",e,null===e||void 0===e?void 0:e.detailedError),f(!0)}))}),[t,v,b,n.version_id]);(0,s.useEffect)((()=>{t&&v&&S()}),[t,v,S]);let _="";if(n){let e=document.baseURI.replace(window.location.origin,"");_="".concat(window.location.origin).concat(e,"api/v1/buckets/").concat(encodeURIComponent(t),"/objects/download?preview=true&prefix=").concat(encodeURIComponent(n.name||"")),n.version_id&&(_=_.concat("&version_id=".concat(n.version_id)))}let w=(0,l.IZ)(u,v);const y=()=>{h(!1)};return(0,m.jsxs)(s.Fragment,{children:["none"!==w&&d&&(0,m.jsx)(i.xA9,{item:!0,xs:12,children:(0,m.jsx)(i.z21,{})}),b?(0,m.jsxs)(i.azJ,{sx:{textAlign:"center","& .iframeContainer":{border:"0px",flex:"1 1 auto",width:"100%",height:250,backgroundColor:"transparent",borderRadius:5,"&.image":{height:500},"&.audio":{height:150},"&.video":{height:350},"&.fullHeight":{height:"calc(100vh - 185px)"}},"& .iframeBase":{backgroundColor:"#fff"},"& .iframeHidden":{display:"none"}},children:["video"===w&&(0,m.jsx)("video",{style:{width:"auto",height:"auto",maxWidth:"calc(100vw - 100px)",maxHeight:"calc(100vh - 200px)"},autoPlay:!0,controls:!0,muted:!1,playsInline:!0,onPlay:y,children:(0,m.jsx)("source",{src:_,type:"video/mp4"})}),"audio"===w&&(0,m.jsx)("audio",{style:{width:"100%",height:"auto"},autoPlay:!0,controls:!0,muted:!1,playsInline:!0,onPlay:y,children:(0,m.jsx)("source",{src:_,type:"audio/mpeg"})}),"image"===w&&(0,m.jsx)("img",{style:{width:"auto",height:"auto",maxWidth:"100vw",maxHeight:"100vh"},src:_,alt:"preview",onLoad:y}),"pdf"===w&&(0,m.jsx)(s.Fragment,{children:(0,m.jsx)(x,{path:_,onLoad:y,loading:d,downloadFile:()=>{(0,p._)(a,t,v,n)}})}),"none"===w&&(0,m.jsx)("div",{children:(0,m.jsx)(i.Wei,{message:" File couldn't be previewed using file extension or mime type. Please try Download instead",title:"Preview unavailable",sx:{margin:"15px 0"}})}),"none"!==w&&"video"!==w&&"audio"!==w&&"image"!==w&&"pdf"!==w&&(0,m.jsx)("div",{className:"iframeBase ".concat(d?"iframeHidden":""),children:(0,m.jsx)("iframe",{src:_,title:"File Preview",allowTransparency:!0,className:"iframeContainer ".concat(o?"fullHeight":w),onLoad:y,children:"File couldn't be loaded. Please try Download instead"})})]}):null]})},b=e=>{let{open:t,bucketName:n,actualInfo:a,onClosePreview:r}=e;return(0,m.jsx)(s.Fragment,{children:(0,m.jsx)(o.A,{modalOpen:t,title:"Preview - ".concat(null===a||void 0===a?void 0:a.name),onClose:r,wideLimit:!1,titleIcon:(0,m.jsx)(i.jG,{}),children:(0,m.jsx)(g,{bucketName:n,actualInfo:a})})})}},7403:(e,t,n)=>{"use strict";n.d(t,{U:()=>s});const s={modalButtonBar:{marginTop:15,display:"flex",alignItems:"center",justifyContent:"flex-end",gap:10},modalFormScrollable:{maxHeight:"calc(100vh - 300px)",overflowY:"auto",paddingTop:10}}},5448:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var s=n(5043),o=n(649);const i=(e,t)=>{const[n,i]=(0,s.useState)(!1);return[n,(n,s,a,r)=>{i(!0),o.A.invoke(n,s,a,r).then((t=>{i(!1),e(t)})).catch((e=>{i(!1),t(e)}))}]}},8661:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var s=n(9379),o=(n(5043),n(4986)),i=n(579);const a=e=>{let{isOpen:t=!1,onClose:n,onCancel:a,onConfirm:r,title:l="",isLoading:c,confirmationContent:d,cancelText:h="Cancel",confirmText:u="Confirm",confirmButtonProps:m,cancelButtonProps:x,titleIcon:p=null,confirmationButtonSimple:j=!1}=e;return(0,i.jsxs)(o.ngX,{title:l,titleIcon:p,onClose:n,open:t,customMaxWidth:510,children:[(0,i.jsx)(o.azJ,{children:d}),(0,i.jsxs)(o.azJ,{sx:{display:"flex",justifyContent:"flex-end",gap:10,marginTop:20},children:[(0,i.jsx)(o.$nd,(0,s.A)((0,s.A)({onClick:a||n,disabled:c,type:"button"},x),{},{variant:"regular",id:"confirm-cancel",label:h})),(0,i.jsx)(o.$nd,(0,s.A)({id:"confirm-ok",onClick:r,label:u,disabled:c,variant:"secondary"},m))]})]})}},1708:(e,t,n)=>{"use strict";n.d(t,{Ex:()=>p,HS:()=>u,mS:()=>m,op:()=>h,oz:()=>x});var s=n(907),o=n(6483),i=n(7414),a=n(3445),r=n(6035),l=n(4159),c=n(28),d=n(6629);const h=(0,s.zD)("objectBrowser/downloadSelected",(async(e,t)=>{let{getState:n,rejectWithValue:s,dispatch:d}=t;const h=n(),u=t=>{const n=encodeURIComponent("".concat(e,"-").concat(t.name,"-").concat((new Date).getTime(),"-").concat(Math.random())),s=(0,i.E0)(8),o=(0,a.RG)(e,t.name,t.version_id,t.size,null,s,(e=>{d((0,r.DW)({instanceID:n,progress:e}))}),(()=>{d((0,r.rx)(n))}),(e=>{d((0,r.iL)({instanceID:n,msg:e}))}),(()=>{d((0,r.Dm)(n))}),(()=>{d((0,l.Hk)("File download will be handled directly by the browser."))}));(0,i.FP)(s,o),d((0,r.cP)({ID:s,bucketName:e,done:!1,instanceID:n,percentage:0,prefix:t.name,type:"download",waitingForFile:!0,failed:!1,cancelled:!1,errorMessage:""}))};if(0!==h.objectBrowser.selectedObjects.length){let t=[];const n=e=>h.objectBrowser.selectedObjects.includes(e.name);if(t=h.objectBrowser.records.filter(n),1===t.length){if(t[0].name.length>200&&(0,o.oK)().toLowerCase().includes("win"))return void d((0,r.Ew)(t[0]));u(t[0])}else if(1===t.length)u(t[0]);else if(t.length>1){const n="".concat(c.c9.now().toFormat("LL-dd-yyyy-HH-mm-ss"),"_files_list.zip"),s=t.reduce(((e,t)=>{const n=null===t||void 0===t?void 0:t.delete_flag;return t&&!n?e.push(t.name):console.log("Skipping ".concat(null===t||void 0===t?void 0:t.name," from download.")),e}),[]);return void await(0,a.Fj)(e,s,n)}}})),u=(0,s.zD)("objectBrowser/openPreview",(async(e,t)=>{let{getState:n,rejectWithValue:s,dispatch:o}=t;const i=n();if(1===i.objectBrowser.selectedObjects.length){let e;const t=e=>i.objectBrowser.selectedObjects.includes(e.name);e=i.objectBrowser.records.find(t),e&&(o((0,r.go)(e)),o((0,r.xE)(!0)))}})),m=(0,s.zD)("objectBrowser/openShare",(async(e,t)=>{let{getState:n,rejectWithValue:s,dispatch:o}=t;const i=n();if(1===i.objectBrowser.selectedObjects.length){let e;const t=e=>i.objectBrowser.selectedObjects.includes(e.name);e=i.objectBrowser.records.find(t),e&&(o((0,r.go)(e)),o((0,r.Lf)(!0)))}})),x=(0,s.zD)("objectBrowser/openAnonymousAccess",(async(e,t)=>{let{getState:n,dispatch:s}=t;const o=n();1===o.objectBrowser.selectedObjects.length&&o.objectBrowser.selectedObjects[0].endsWith("/")&&s((0,r.I8)(!0))})),p=(0,s.zD)("objectBrowser/maxShareLinkExpTime",(async(e,t)=>{let{rejectWithValue:n,dispatch:s}=t;return d.F.buckets.getMaxShareLinkExp().then((e=>{s((0,r.QV)(e.data.exp))})).catch((async e=>n(e.error)))}))},8245:(e,t,n)=>{"use strict";n.d(t,{_:()=>l});var s=n(6483),o=n(7414),i=n(3445),a=n(6035),r=n(4159);const l=(e,t,n,l)=>{var c;const d=encodeURIComponent("".concat(t,"-").concat(l.name,"-").concat((new Date).getTime(),"-").concat(Math.random())),h=(0,s.oK)().toLowerCase().includes("win");if(((null===(c=l.name)||void 0===c?void 0:c.length)||0)>200&&h)return void e((0,a.Jl)(!0));const u=(0,o.E0)(8),m=(0,i.RG)(t,n,l.version_id,l.size||0,null,u,(t=>{e((0,a.DW)({instanceID:d,progress:t}))}),(()=>{e((0,a.rx)(d))}),(t=>{e((0,a.iL)({instanceID:d,msg:t}))}),(()=>{e((0,a.Dm)(d))}),(()=>{e((0,r.Hk)("File download will be handled directly by the browser."))}));(0,o.FP)(u,m),e((0,a.cP)({ID:u,bucketName:t,done:!1,instanceID:d,percentage:0,prefix:l.name||"",type:"download",waitingForFile:!0,failed:!1,cancelled:!1,errorMessage:""}))}},2634:()=>{}}]);
//# sourceMappingURL=88.069f28b7.chunk.js.map